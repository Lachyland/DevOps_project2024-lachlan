function cov_ymy7bmg10(){var path="C:\\Users\\GIGABYTE G5\\Desktop\\Devops\\Individual-project-lachlan\\DevOps_project2024-lachlan\\utils\\read-util.js";var hash="5f9262e37d9d901b43724c4bcf9e7043b4391a7f";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\GIGABYTE G5\\Desktop\\Devops\\Individual-project-lachlan\\DevOps_project2024-lachlan\\utils\\read-util.js",statementMap:{"0":{start:{line:1,column:16},end:{line:1,column:44}},"1":{start:{line:5,column:4},end:{line:39,column:5}},"2":{start:{line:7,column:32},end:{line:7,column:41}},"3":{start:{line:10,column:8},end:{line:10,column:52}},"4":{start:{line:13,column:22},end:{line:13,column:56}},"5":{start:{line:14,column:25},end:{line:14,column:50}},"6":{start:{line:17,column:8},end:{line:19,column:9}},"7":{start:{line:18,column:12},end:{line:18,column:81}},"8":{start:{line:22,column:34},end:{line:33,column:10}},"9":{start:{line:23,column:33},end:{line:23,column:47}},"10":{start:{line:26,column:12},end:{line:30,column:13}},"11":{start:{line:27,column:16},end:{line:27,column:65}},"12":{start:{line:28,column:19},end:{line:30,column:13}},"13":{start:{line:29,column:16},end:{line:29,column:41}},"14":{start:{line:32,column:12},end:{line:32,column:32}},"15":{start:{line:35,column:8},end:{line:35,column:55}},"16":{start:{line:37,column:8},end:{line:37,column:57}},"17":{start:{line:38,column:8},end:{line:38,column:83}},"18":{start:{line:42,column:0},end:{line:42,column:33}}},fnMap:{"0":{name:"readStudent",decl:{start:{line:4,column:15},end:{line:4,column:26}},loc:{start:{line:4,column:37},end:{line:40,column:1}},line:4},"1":{name:"(anonymous_1)",decl:{start:{line:22,column:47},end:{line:22,column:48}},loc:{start:{line:22,column:54},end:{line:33,column:9}},line:22}},branchMap:{"0":{loc:{start:{line:13,column:22},end:{line:13,column:56}},type:"cond-expr",locations:[{start:{line:13,column:36},end:{line:13,column:51}},{start:{line:13,column:54},end:{line:13,column:56}}],line:13},"1":{loc:{start:{line:17,column:8},end:{line:19,column:9}},type:"if",locations:[{start:{line:17,column:8},end:{line:19,column:9}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:17},"2":{loc:{start:{line:26,column:12},end:{line:30,column:13}},type:"if",locations:[{start:{line:26,column:12},end:{line:30,column:13}},{start:{line:28,column:19},end:{line:30,column:13}}],line:26},"3":{loc:{start:{line:28,column:19},end:{line:30,column:13}},type:"if",locations:[{start:{line:28,column:19},end:{line:30,column:13}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:28}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0},f:{"0":0,"1":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5f9262e37d9d901b43724c4bcf9e7043b4391a7f"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_ymy7bmg10=function(){return actualCoverage;};}return actualCoverage;}cov_ymy7bmg10();const student=(cov_ymy7bmg10().s[0]++,require('../models/Student'));// Function to fetch all student data
async function readStudent(req,res){cov_ymy7bmg10().f[0]++;cov_ymy7bmg10().s[1]++;try{// Validate query parameters
const{adminNumber}=(cov_ymy7bmg10().s[2]++,req.query);// Log the query parameters
cov_ymy7bmg10().s[3]++;console.log('Query parameters:',req.query);// Fetch data based on query or return all
const query=(cov_ymy7bmg10().s[4]++,adminNumber?(cov_ymy7bmg10().b[0][0]++,{adminNumber}):(cov_ymy7bmg10().b[0][1]++,{}));const students=(cov_ymy7bmg10().s[5]++,await student.find(query));// Handle case where no student data is found
cov_ymy7bmg10().s[6]++;if(students.length===0){cov_ymy7bmg10().b[1][0]++;cov_ymy7bmg10().s[7]++;return res.status(404).json({message:'No student records found'});}else{cov_ymy7bmg10().b[1][1]++;}// Format response to include proper type conversions
const formattedStudents=(cov_ymy7bmg10().s[8]++,students.map(stu=>{cov_ymy7bmg10().f[1]++;const formattedStu=(cov_ymy7bmg10().s[9]++,stu.toObject());// Check if cGPA is of type Decimal128 and convert it to string
cov_ymy7bmg10().s[10]++;if(formattedStu.cGPA instanceof Decimal128){cov_ymy7bmg10().b[2][0]++;cov_ymy7bmg10().s[11]++;formattedStu.cGPA=formattedStu.cGPA.toString();}else{cov_ymy7bmg10().b[2][1]++;cov_ymy7bmg10().s[12]++;if(formattedStu.cGPA===undefined){cov_ymy7bmg10().b[3][0]++;cov_ymy7bmg10().s[13]++;formattedStu.cGPA=null;// If cGPA is undefined, set it to null
}else{cov_ymy7bmg10().b[3][1]++;}}cov_ymy7bmg10().s[14]++;return formattedStu;}));cov_ymy7bmg10().s[15]++;return res.status(200).json(formattedStudents);}catch(error){cov_ymy7bmg10().s[16]++;console.error("Error fetching students:",error);cov_ymy7bmg10().s[17]++;return res.status(500).json({message:'Server error: '+error.message});}}cov_ymy7bmg10().s[18]++;module.exports={readStudent};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfeW15N2JtZzEwIiwiYWN0dWFsQ292ZXJhZ2UiLCJzdHVkZW50IiwicyIsInJlcXVpcmUiLCJyZWFkU3R1ZGVudCIsInJlcSIsInJlcyIsImYiLCJhZG1pbk51bWJlciIsInF1ZXJ5IiwiY29uc29sZSIsImxvZyIsImIiLCJzdHVkZW50cyIsImZpbmQiLCJsZW5ndGgiLCJzdGF0dXMiLCJqc29uIiwibWVzc2FnZSIsImZvcm1hdHRlZFN0dWRlbnRzIiwibWFwIiwic3R1IiwiZm9ybWF0dGVkU3R1IiwidG9PYmplY3QiLCJjR1BBIiwiRGVjaW1hbDEyOCIsInRvU3RyaW5nIiwidW5kZWZpbmVkIiwiZXJyb3IiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsicmVhZC11dGlsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHN0dWRlbnQgPSByZXF1aXJlKCcuLi9tb2RlbHMvU3R1ZGVudCcpO1xyXG5cclxuLy8gRnVuY3Rpb24gdG8gZmV0Y2ggYWxsIHN0dWRlbnQgZGF0YVxyXG5hc3luYyBmdW5jdGlvbiByZWFkU3R1ZGVudChyZXEsIHJlcykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICAvLyBWYWxpZGF0ZSBxdWVyeSBwYXJhbWV0ZXJzXHJcbiAgICAgICAgY29uc3QgeyBhZG1pbk51bWJlciB9ID0gcmVxLnF1ZXJ5O1xyXG5cclxuICAgICAgICAvLyBMb2cgdGhlIHF1ZXJ5IHBhcmFtZXRlcnNcclxuICAgICAgICBjb25zb2xlLmxvZygnUXVlcnkgcGFyYW1ldGVyczonLCByZXEucXVlcnkpO1xyXG5cclxuICAgICAgICAvLyBGZXRjaCBkYXRhIGJhc2VkIG9uIHF1ZXJ5IG9yIHJldHVybiBhbGxcclxuICAgICAgICBjb25zdCBxdWVyeSA9IGFkbWluTnVtYmVyID8geyBhZG1pbk51bWJlciB9IDoge307XHJcbiAgICAgICAgY29uc3Qgc3R1ZGVudHMgPSBhd2FpdCBzdHVkZW50LmZpbmQocXVlcnkpO1xyXG5cclxuICAgICAgICAvLyBIYW5kbGUgY2FzZSB3aGVyZSBubyBzdHVkZW50IGRhdGEgaXMgZm91bmRcclxuICAgICAgICBpZiAoc3R1ZGVudHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdObyBzdHVkZW50IHJlY29yZHMgZm91bmQnIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRm9ybWF0IHJlc3BvbnNlIHRvIGluY2x1ZGUgcHJvcGVyIHR5cGUgY29udmVyc2lvbnNcclxuICAgICAgICBjb25zdCBmb3JtYXR0ZWRTdHVkZW50cyA9IHN0dWRlbnRzLm1hcChzdHUgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBmb3JtYXR0ZWRTdHUgPSBzdHUudG9PYmplY3QoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIGNHUEEgaXMgb2YgdHlwZSBEZWNpbWFsMTI4IGFuZCBjb252ZXJ0IGl0IHRvIHN0cmluZ1xyXG4gICAgICAgICAgICBpZiAoZm9ybWF0dGVkU3R1LmNHUEEgaW5zdGFuY2VvZiBEZWNpbWFsMTI4KSB7XHJcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZWRTdHUuY0dQQSA9IGZvcm1hdHRlZFN0dS5jR1BBLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZm9ybWF0dGVkU3R1LmNHUEEgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgZm9ybWF0dGVkU3R1LmNHUEEgPSBudWxsOyAgLy8gSWYgY0dQQSBpcyB1bmRlZmluZWQsIHNldCBpdCB0byBudWxsXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmb3JtYXR0ZWRTdHU7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihmb3JtYXR0ZWRTdHVkZW50cyk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBzdHVkZW50czpcIiwgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdTZXJ2ZXIgZXJyb3I6ICcgKyBlcnJvci5tZXNzYWdlIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHsgcmVhZFN0dWRlbnQgfTtcclxuIl0sIm1hcHBpbmdzIjoiOGdHQWVZO0FBQUFBLGFBQUEsU0FBQUEsQ0FBQSxTQUFBQyxjQUFBLFdBQUFBLGNBQUEsRUFBQUQsYUFBQSxHQWZaLEtBQU0sQ0FBQUUsT0FBTyxFQUFBRixhQUFBLEdBQUFHLENBQUEsTUFBR0MsT0FBTyxDQUFDLG1CQUFtQixDQUFDLEVBRTVDO0FBQ0EsY0FBZSxDQUFBQyxXQUFXQSxDQUFDQyxHQUFHLENBQUVDLEdBQUcsQ0FBRSxDQUFBUCxhQUFBLEdBQUFRLENBQUEsTUFBQVIsYUFBQSxHQUFBRyxDQUFBLE1BQ2pDLEdBQUksQ0FDQTtBQUNBLEtBQU0sQ0FBRU0sV0FBWSxDQUFDLEVBQUFULGFBQUEsR0FBQUcsQ0FBQSxNQUFHRyxHQUFHLENBQUNJLEtBQUssRUFFakM7QUFBQVYsYUFBQSxHQUFBRyxDQUFBLE1BQ0FRLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLG1CQUFtQixDQUFFTixHQUFHLENBQUNJLEtBQUssQ0FBQyxDQUUzQztBQUNBLEtBQU0sQ0FBQUEsS0FBSyxFQUFBVixhQUFBLEdBQUFHLENBQUEsTUFBR00sV0FBVyxFQUFBVCxhQUFBLEdBQUFhLENBQUEsU0FBRyxDQUFFSixXQUFZLENBQUMsR0FBQVQsYUFBQSxHQUFBYSxDQUFBLFNBQUcsQ0FBQyxDQUFDLEdBQ2hELEtBQU0sQ0FBQUMsUUFBUSxFQUFBZCxhQUFBLEdBQUFHLENBQUEsTUFBRyxLQUFNLENBQUFELE9BQU8sQ0FBQ2EsSUFBSSxDQUFDTCxLQUFLLENBQUMsRUFFMUM7QUFBQVYsYUFBQSxHQUFBRyxDQUFBLE1BQ0EsR0FBSVcsUUFBUSxDQUFDRSxNQUFNLEdBQUssQ0FBQyxDQUFFLENBQUFoQixhQUFBLEdBQUFhLENBQUEsU0FBQWIsYUFBQSxHQUFBRyxDQUFBLE1BQ3ZCLE1BQU8sQ0FBQUksR0FBRyxDQUFDVSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQyxDQUFFQyxPQUFPLENBQUUsMEJBQTJCLENBQUMsQ0FBQyxDQUN4RSxDQUFDLEtBQUFuQixhQUFBLEdBQUFhLENBQUEsVUFFRDtBQUNBLEtBQU0sQ0FBQU8saUJBQWlCLEVBQUFwQixhQUFBLEdBQUFHLENBQUEsTUFBR1csUUFBUSxDQUFDTyxHQUFHLENBQUNDLEdBQUcsRUFBSSxDQUFBdEIsYUFBQSxHQUFBUSxDQUFBLE1BQzFDLEtBQU0sQ0FBQWUsWUFBWSxFQUFBdkIsYUFBQSxHQUFBRyxDQUFBLE1BQUdtQixHQUFHLENBQUNFLFFBQVEsQ0FBQyxDQUFDLEVBRW5DO0FBQUF4QixhQUFBLEdBQUFHLENBQUEsT0FDQSxHQUFJb0IsWUFBWSxDQUFDRSxJQUFJLFdBQVksQ0FBQUMsVUFBVSxDQUFFLENBQUExQixhQUFBLEdBQUFhLENBQUEsU0FBQWIsYUFBQSxHQUFBRyxDQUFBLE9BQ3pDb0IsWUFBWSxDQUFDRSxJQUFJLENBQUdGLFlBQVksQ0FBQ0UsSUFBSSxDQUFDRSxRQUFRLENBQUMsQ0FBQyxDQUNwRCxDQUFDLElBQU0sQ0FBQTNCLGFBQUEsR0FBQWEsQ0FBQSxTQUFBYixhQUFBLEdBQUFHLENBQUEsVUFBSW9CLFlBQVksQ0FBQ0UsSUFBSSxHQUFLRyxTQUFTLENBQUUsQ0FBQTVCLGFBQUEsR0FBQWEsQ0FBQSxTQUFBYixhQUFBLEdBQUFHLENBQUEsT0FDeENvQixZQUFZLENBQUNFLElBQUksQ0FBRyxJQUFJLENBQUc7QUFDL0IsQ0FBQyxLQUFBekIsYUFBQSxHQUFBYSxDQUFBLFVBQUQsQ0FBQ2IsYUFBQSxHQUFBRyxDQUFBLE9BRUQsTUFBTyxDQUFBb0IsWUFBWSxDQUN2QixDQUFDLENBQUMsRUFBQ3ZCLGFBQUEsR0FBQUcsQ0FBQSxPQUVILE1BQU8sQ0FBQUksR0FBRyxDQUFDVSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQ0UsaUJBQWlCLENBQUMsQ0FDbEQsQ0FBRSxNQUFPUyxLQUFLLENBQUUsQ0FBQTdCLGFBQUEsR0FBQUcsQ0FBQSxPQUNaUSxPQUFPLENBQUNrQixLQUFLLENBQUMsMEJBQTBCLENBQUVBLEtBQUssQ0FBQyxDQUFDN0IsYUFBQSxHQUFBRyxDQUFBLE9BQ2pELE1BQU8sQ0FBQUksR0FBRyxDQUFDVSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQyxDQUFFQyxPQUFPLENBQUUsZ0JBQWdCLENBQUdVLEtBQUssQ0FBQ1YsT0FBUSxDQUFDLENBQUMsQ0FDOUUsQ0FDSixDQUFDbkIsYUFBQSxHQUFBRyxDQUFBLE9BRUQyQixNQUFNLENBQUNDLE9BQU8sQ0FBRyxDQUFFMUIsV0FBWSxDQUFDIiwiaWdub3JlTGlzdCI6W119
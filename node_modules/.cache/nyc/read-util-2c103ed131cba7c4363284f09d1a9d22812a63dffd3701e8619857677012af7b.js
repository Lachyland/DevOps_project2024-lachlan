function cov_1qzhf22oeh(){var path="C:\\Users\\GIGABYTE G5\\Desktop\\Devops\\Individual-project\\DevOps_project2024-lachlan\\utils\\read-util.js";var hash="cf0965d95cd47773f1c70c3f7ab48d01170b7942";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\GIGABYTE G5\\Desktop\\Devops\\Individual-project\\DevOps_project2024-lachlan\\utils\\read-util.js",statementMap:{"0":{start:{line:1,column:16},end:{line:1,column:44}},"1":{start:{line:5,column:4},end:{line:40,column:5}},"2":{start:{line:7,column:22},end:{line:7,column:53}},"3":{start:{line:8,column:21},end:{line:8,column:50}},"4":{start:{line:9,column:23},end:{line:9,column:56}},"5":{start:{line:10,column:22},end:{line:10,column:57}},"6":{start:{line:13,column:30},end:{line:13,column:60}},"7":{start:{line:16,column:28},end:{line:20,column:37}},"8":{start:{line:23,column:29},end:{line:26,column:11}},"9":{start:{line:23,column:57},end:{line:26,column:9}},"10":{start:{line:29,column:8},end:{line:36,column:11}},"11":{start:{line:38,column:8},end:{line:38,column:65}},"12":{start:{line:39,column:8},end:{line:39,column:94}},"13":{start:{line:43,column:0},end:{line:45,column:2}}},fnMap:{"0":{name:"readStudent",decl:{start:{line:4,column:15},end:{line:4,column:26}},loc:{start:{line:4,column:37},end:{line:41,column:1}},line:4},"1":{name:"(anonymous_1)",decl:{start:{line:23,column:45},end:{line:23,column:46}},loc:{start:{line:23,column:57},end:{line:26,column:9}},line:23}},branchMap:{"0":{loc:{start:{line:7,column:22},end:{line:7,column:53}},type:"binary-expr",locations:[{start:{line:7,column:22},end:{line:7,column:47}},{start:{line:7,column:51},end:{line:7,column:53}}],line:7},"1":{loc:{start:{line:8,column:21},end:{line:8,column:50}},type:"binary-expr",locations:[{start:{line:8,column:21},end:{line:8,column:45}},{start:{line:8,column:49},end:{line:8,column:50}}],line:8},"2":{loc:{start:{line:9,column:23},end:{line:9,column:56}},type:"binary-expr",locations:[{start:{line:9,column:23},end:{line:9,column:39}},{start:{line:9,column:43},end:{line:9,column:56}}],line:9},"3":{loc:{start:{line:10,column:22},end:{line:10,column:57}},type:"cond-expr",locations:[{start:{line:10,column:51},end:{line:10,column:53}},{start:{line:10,column:56},end:{line:10,column:57}}],line:10}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},f:{"0":0,"1":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cf0965d95cd47773f1c70c3f7ab48d01170b7942"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1qzhf22oeh=function(){return actualCoverage;};}return actualCoverage;}cov_1qzhf22oeh();const student=(cov_1qzhf22oeh().s[0]++,require('../models/Student'));// Import the model directly
// Function to fetch all student data with pagination and sorting
async function readStudent(req,res){cov_1qzhf22oeh().f[0]++;cov_1qzhf22oeh().s[1]++;try{// Extract query parameters for pagination and sorting
const limit=(cov_1qzhf22oeh().s[2]++,(cov_1qzhf22oeh().b[0][0]++,parseInt(req.query.limit))||(cov_1qzhf22oeh().b[0][1]++,10));// Default to 10 students per page
const page=(cov_1qzhf22oeh().s[3]++,(cov_1qzhf22oeh().b[1][0]++,parseInt(req.query.page))||(cov_1qzhf22oeh().b[1][1]++,1));// Default to page 1
const sortBy=(cov_1qzhf22oeh().s[4]++,(cov_1qzhf22oeh().b[2][0]++,req.query.sortBy)||(cov_1qzhf22oeh().b[2][1]++,'adminNumber'));// Default sorting field
const order=(cov_1qzhf22oeh().s[5]++,req.query.order==='desc'?(cov_1qzhf22oeh().b[3][0]++,-1):(cov_1qzhf22oeh().b[3][1]++,1));// Ascending by default
// Fetch total count for metadata
const totalStudents=(cov_1qzhf22oeh().s[6]++,await student.countDocuments());// Fetch students with pagination and sorting
const allStudents=(cov_1qzhf22oeh().s[7]++,await student.find().sort({[sortBy]:order}).limit(limit).skip((page-1)*limit));// Convert cGPA to string if needed
const studentsData=(cov_1qzhf22oeh().s[8]++,allStudents.map(student=>{cov_1qzhf22oeh().f[1]++;cov_1qzhf22oeh().s[9]++;return{...student.toObject(),cGPA:student.cGPA.toString()// Ensure Decimal128 is converted to string
};}));// Return students and metadata
cov_1qzhf22oeh().s[10]++;return res.status(200).json({metadata:{totalStudents,currentPage:page,totalPages:Math.ceil(totalStudents/limit)},students:studentsData});}catch(error){cov_1qzhf22oeh().s[11]++;console.error("Error fetching students:",error.message);cov_1qzhf22oeh().s[12]++;return res.status(500).json({message:"Error fetching students: "+error.message});}}cov_1qzhf22oeh().s[13]++;module.exports={readStudent};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMXF6aGYyMm9laCIsImFjdHVhbENvdmVyYWdlIiwic3R1ZGVudCIsInMiLCJyZXF1aXJlIiwicmVhZFN0dWRlbnQiLCJyZXEiLCJyZXMiLCJmIiwibGltaXQiLCJiIiwicGFyc2VJbnQiLCJxdWVyeSIsInBhZ2UiLCJzb3J0QnkiLCJvcmRlciIsInRvdGFsU3R1ZGVudHMiLCJjb3VudERvY3VtZW50cyIsImFsbFN0dWRlbnRzIiwiZmluZCIsInNvcnQiLCJza2lwIiwic3R1ZGVudHNEYXRhIiwibWFwIiwidG9PYmplY3QiLCJjR1BBIiwidG9TdHJpbmciLCJzdGF0dXMiLCJqc29uIiwibWV0YWRhdGEiLCJjdXJyZW50UGFnZSIsInRvdGFsUGFnZXMiLCJNYXRoIiwiY2VpbCIsInN0dWRlbnRzIiwiZXJyb3IiLCJjb25zb2xlIiwibWVzc2FnZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJyZWFkLXV0aWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgc3R1ZGVudCA9IHJlcXVpcmUoJy4uL21vZGVscy9TdHVkZW50Jyk7IC8vIEltcG9ydCB0aGUgbW9kZWwgZGlyZWN0bHlcclxuXHJcbi8vIEZ1bmN0aW9uIHRvIGZldGNoIGFsbCBzdHVkZW50IGRhdGEgd2l0aCBwYWdpbmF0aW9uIGFuZCBzb3J0aW5nXHJcbmFzeW5jIGZ1bmN0aW9uIHJlYWRTdHVkZW50KHJlcSwgcmVzKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIC8vIEV4dHJhY3QgcXVlcnkgcGFyYW1ldGVycyBmb3IgcGFnaW5hdGlvbiBhbmQgc29ydGluZ1xyXG4gICAgICAgIGNvbnN0IGxpbWl0ID0gcGFyc2VJbnQocmVxLnF1ZXJ5LmxpbWl0KSB8fCAxMDsgLy8gRGVmYXVsdCB0byAxMCBzdHVkZW50cyBwZXIgcGFnZVxyXG4gICAgICAgIGNvbnN0IHBhZ2UgPSBwYXJzZUludChyZXEucXVlcnkucGFnZSkgfHwgMTsgLy8gRGVmYXVsdCB0byBwYWdlIDFcclxuICAgICAgICBjb25zdCBzb3J0QnkgPSByZXEucXVlcnkuc29ydEJ5IHx8ICdhZG1pbk51bWJlcic7IC8vIERlZmF1bHQgc29ydGluZyBmaWVsZFxyXG4gICAgICAgIGNvbnN0IG9yZGVyID0gcmVxLnF1ZXJ5Lm9yZGVyID09PSAnZGVzYycgPyAtMSA6IDE7IC8vIEFzY2VuZGluZyBieSBkZWZhdWx0XHJcblxyXG4gICAgICAgIC8vIEZldGNoIHRvdGFsIGNvdW50IGZvciBtZXRhZGF0YVxyXG4gICAgICAgIGNvbnN0IHRvdGFsU3R1ZGVudHMgPSBhd2FpdCBzdHVkZW50LmNvdW50RG9jdW1lbnRzKCk7XHJcblxyXG4gICAgICAgIC8vIEZldGNoIHN0dWRlbnRzIHdpdGggcGFnaW5hdGlvbiBhbmQgc29ydGluZ1xyXG4gICAgICAgIGNvbnN0IGFsbFN0dWRlbnRzID0gYXdhaXQgc3R1ZGVudFxyXG4gICAgICAgICAgICAuZmluZCgpXHJcbiAgICAgICAgICAgIC5zb3J0KHsgW3NvcnRCeV06IG9yZGVyIH0pXHJcbiAgICAgICAgICAgIC5saW1pdChsaW1pdClcclxuICAgICAgICAgICAgLnNraXAoKHBhZ2UgLSAxKSAqIGxpbWl0KTtcclxuXHJcbiAgICAgICAgLy8gQ29udmVydCBjR1BBIHRvIHN0cmluZyBpZiBuZWVkZWRcclxuICAgICAgICBjb25zdCBzdHVkZW50c0RhdGEgPSBhbGxTdHVkZW50cy5tYXAoc3R1ZGVudCA9PiAoe1xyXG4gICAgICAgICAgICAuLi5zdHVkZW50LnRvT2JqZWN0KCksXHJcbiAgICAgICAgICAgIGNHUEE6IHN0dWRlbnQuY0dQQS50b1N0cmluZygpIC8vIEVuc3VyZSBEZWNpbWFsMTI4IGlzIGNvbnZlcnRlZCB0byBzdHJpbmdcclxuICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIC8vIFJldHVybiBzdHVkZW50cyBhbmQgbWV0YWRhdGFcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICAgICAgICBtZXRhZGF0YToge1xyXG4gICAgICAgICAgICAgICAgdG90YWxTdHVkZW50cyxcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRQYWdlOiBwYWdlLFxyXG4gICAgICAgICAgICAgICAgdG90YWxQYWdlczogTWF0aC5jZWlsKHRvdGFsU3R1ZGVudHMgLyBsaW1pdClcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc3R1ZGVudHM6IHN0dWRlbnRzRGF0YVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgc3R1ZGVudHM6XCIsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiRXJyb3IgZmV0Y2hpbmcgc3R1ZGVudHM6IFwiICsgZXJyb3IubWVzc2FnZSB9KTtcclxuICAgIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgICByZWFkU3R1ZGVudCxcclxufTtcclxuIl0sIm1hcHBpbmdzIjoiOG9GQWVZO0FBQUFBLGNBQUEsU0FBQUEsQ0FBQSxTQUFBQyxjQUFBLFdBQUFBLGNBQUEsRUFBQUQsY0FBQSxHQWZaLEtBQU0sQ0FBQUUsT0FBTyxFQUFBRixjQUFBLEdBQUFHLENBQUEsTUFBR0MsT0FBTyxDQUFDLG1CQUFtQixDQUFDLEVBQUU7QUFFOUM7QUFDQSxjQUFlLENBQUFDLFdBQVdBLENBQUNDLEdBQUcsQ0FBRUMsR0FBRyxDQUFFLENBQUFQLGNBQUEsR0FBQVEsQ0FBQSxNQUFBUixjQUFBLEdBQUFHLENBQUEsTUFDakMsR0FBSSxDQUNBO0FBQ0EsS0FBTSxDQUFBTSxLQUFLLEVBQUFULGNBQUEsR0FBQUcsQ0FBQSxNQUFHLENBQUFILGNBQUEsR0FBQVUsQ0FBQSxTQUFBQyxRQUFRLENBQUNMLEdBQUcsQ0FBQ00sS0FBSyxDQUFDSCxLQUFLLENBQUMsSUFBQVQsY0FBQSxHQUFBVSxDQUFBLFNBQUksRUFBRSxHQUFFO0FBQy9DLEtBQU0s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
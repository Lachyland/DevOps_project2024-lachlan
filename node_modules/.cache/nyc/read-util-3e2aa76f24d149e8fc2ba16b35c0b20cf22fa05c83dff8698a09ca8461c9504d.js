function cov_ymy7bmg10(){var path="C:\\Users\\GIGABYTE G5\\Desktop\\Devops\\Individual-project-lachlan\\DevOps_project2024-lachlan\\utils\\read-util.js";var hash="46c55a93063677e1f7b5586c20cc0f160985529b";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\GIGABYTE G5\\Desktop\\Devops\\Individual-project-lachlan\\DevOps_project2024-lachlan\\utils\\read-util.js",statementMap:{"0":{start:{line:1,column:16},end:{line:1,column:44}},"1":{start:{line:5,column:4},end:{line:34,column:5}},"2":{start:{line:7,column:32},end:{line:7,column:41}},"3":{start:{line:10,column:8},end:{line:10,column:52}},"4":{start:{line:13,column:22},end:{line:13,column:56}},"5":{start:{line:14,column:25},end:{line:14,column:50}},"6":{start:{line:17,column:8},end:{line:19,column:9}},"7":{start:{line:18,column:12},end:{line:18,column:81}},"8":{start:{line:22,column:34},end:{line:28,column:10}},"9":{start:{line:24,column:12},end:{line:27,column:14}},"10":{start:{line:30,column:8},end:{line:30,column:55}},"11":{start:{line:32,column:8},end:{line:32,column:57}},"12":{start:{line:33,column:8},end:{line:33,column:83}},"13":{start:{line:37,column:0},end:{line:37,column:33}}},fnMap:{"0":{name:"readStudent",decl:{start:{line:4,column:15},end:{line:4,column:26}},loc:{start:{line:4,column:37},end:{line:35,column:1}},line:4},"1":{name:"(anonymous_1)",decl:{start:{line:22,column:47},end:{line:22,column:48}},loc:{start:{line:22,column:54},end:{line:28,column:9}},line:22}},branchMap:{"0":{loc:{start:{line:13,column:22},end:{line:13,column:56}},type:"cond-expr",locations:[{start:{line:13,column:36},end:{line:13,column:51}},{start:{line:13,column:54},end:{line:13,column:56}}],line:13},"1":{loc:{start:{line:17,column:8},end:{line:19,column:9}},type:"if",locations:[{start:{line:17,column:8},end:{line:19,column:9}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:17},"2":{loc:{start:{line:26,column:22},end:{line:26,column:67}},type:"cond-expr",locations:[{start:{line:26,column:41},end:{line:26,column:60}},{start:{line:26,column:63},end:{line:26,column:67}}],line:26}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},f:{"0":0,"1":0},b:{"0":[0,0],"1":[0,0],"2":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"46c55a93063677e1f7b5586c20cc0f160985529b"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_ymy7bmg10=function(){return actualCoverage;};}return actualCoverage;}cov_ymy7bmg10();const student=(cov_ymy7bmg10().s[0]++,require('../models/Student'));// Function to fetch all student data
async function readStudent(req,res){cov_ymy7bmg10().f[0]++;cov_ymy7bmg10().s[1]++;try{// Validate query parameters
const{adminNumber}=(cov_ymy7bmg10().s[2]++,req.query);// Log the query parameters
cov_ymy7bmg10().s[3]++;console.log('Query parameters:',req.query);// Fetch data based on query or return all
const query=(cov_ymy7bmg10().s[4]++,adminNumber?(cov_ymy7bmg10().b[0][0]++,{adminNumber}):(cov_ymy7bmg10().b[0][1]++,{}));const students=(cov_ymy7bmg10().s[5]++,await student.find(query));// Handle case where no student data is found
cov_ymy7bmg10().s[6]++;if(students.length===0){cov_ymy7bmg10().b[1][0]++;cov_ymy7bmg10().s[7]++;return res.status(404).json({message:'No student records found'});}else{cov_ymy7bmg10().b[1][1]++;}// Format response to include proper type conversions for cGPA
const formattedStudents=(cov_ymy7bmg10().s[8]++,students.map(stu=>{cov_ymy7bmg10().f[1]++;cov_ymy7bmg10().s[9]++;// Ensure cGPA is converted to string or null if not available
return{...stu.toObject(),cGPA:stu.cGPA!=null?(cov_ymy7bmg10().b[2][0]++,stu.cGPA.toString()):(cov_ymy7bmg10().b[2][1]++,null)};}));cov_ymy7bmg10().s[10]++;return res.status(200).json(formattedStudents);}catch(error){cov_ymy7bmg10().s[11]++;console.error("Error fetching students:",error);cov_ymy7bmg10().s[12]++;return res.status(500).json({message:'Server error: '+error.message});}}cov_ymy7bmg10().s[13]++;module.exports={readStudent};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfeW15N2JtZzEwIiwiYWN0dWFsQ292ZXJhZ2UiLCJzdHVkZW50IiwicyIsInJlcXVpcmUiLCJyZWFkU3R1ZGVudCIsInJlcSIsInJlcyIsImYiLCJhZG1pbk51bWJlciIsInF1ZXJ5IiwiY29uc29sZSIsImxvZyIsImIiLCJzdHVkZW50cyIsImZpbmQiLCJsZW5ndGgiLCJzdGF0dXMiLCJqc29uIiwibWVzc2FnZSIsImZvcm1hdHRlZFN0dWRlbnRzIiwibWFwIiwic3R1IiwidG9PYmplY3QiLCJjR1BBIiwidG9TdHJpbmciLCJlcnJvciIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJyZWFkLXV0aWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgc3R1ZGVudCA9IHJlcXVpcmUoJy4uL21vZGVscy9TdHVkZW50Jyk7XHJcblxyXG4vLyBGdW5jdGlvbiB0byBmZXRjaCBhbGwgc3R1ZGVudCBkYXRhXHJcbmFzeW5jIGZ1bmN0aW9uIHJlYWRTdHVkZW50KHJlcSwgcmVzKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIC8vIFZhbGlkYXRlIHF1ZXJ5IHBhcmFtZXRlcnNcclxuICAgICAgICBjb25zdCB7IGFkbWluTnVtYmVyIH0gPSByZXEucXVlcnk7XHJcblxyXG4gICAgICAgIC8vIExvZyB0aGUgcXVlcnkgcGFyYW1ldGVyc1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdRdWVyeSBwYXJhbWV0ZXJzOicsIHJlcS5xdWVyeSk7XHJcblxyXG4gICAgICAgIC8vIEZldGNoIGRhdGEgYmFzZWQgb24gcXVlcnkgb3IgcmV0dXJuIGFsbFxyXG4gICAgICAgIGNvbnN0IHF1ZXJ5ID0gYWRtaW5OdW1iZXIgPyB7IGFkbWluTnVtYmVyIH0gOiB7fTtcclxuICAgICAgICBjb25zdCBzdHVkZW50cyA9IGF3YWl0IHN0dWRlbnQuZmluZChxdWVyeSk7XHJcblxyXG4gICAgICAgIC8vIEhhbmRsZSBjYXNlIHdoZXJlIG5vIHN0dWRlbnQgZGF0YSBpcyBmb3VuZFxyXG4gICAgICAgIGlmIChzdHVkZW50cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ05vIHN0dWRlbnQgcmVjb3JkcyBmb3VuZCcgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBGb3JtYXQgcmVzcG9uc2UgdG8gaW5jbHVkZSBwcm9wZXIgdHlwZSBjb252ZXJzaW9ucyBmb3IgY0dQQVxyXG4gICAgICAgIGNvbnN0IGZvcm1hdHRlZFN0dWRlbnRzID0gc3R1ZGVudHMubWFwKHN0dSA9PiB7XHJcbiAgICAgICAgICAgIC8vIEVuc3VyZSBjR1BBIGlzIGNvbnZlcnRlZCB0byBzdHJpbmcgb3IgbnVsbCBpZiBub3QgYXZhaWxhYmxlXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAuLi5zdHUudG9PYmplY3QoKSxcclxuICAgICAgICAgICAgICAgIGNHUEE6IHN0dS5jR1BBICE9IG51bGwgPyBzdHUuY0dQQS50b1N0cmluZygpIDogbnVsbFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oZm9ybWF0dGVkU3R1ZGVudHMpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgc3R1ZGVudHM6XCIsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnU2VydmVyIGVycm9yOiAnICsgZXJyb3IubWVzc2FnZSB9KTtcclxuICAgIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7IHJlYWRTdHVkZW50IH07XHJcbiJdLCJtYXBwaW5ncyI6IjIrRUFlWTtBQUFBQSxhQUFBLFNBQUFBLENBQUEsU0FBQUMsY0FBQSxXQUFBQSxjQUFBLEVBQUFELGFBQUEsR0Fm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
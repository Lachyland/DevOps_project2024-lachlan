function cov_ymy7bmg10(){var path="C:\\Users\\GIGABYTE G5\\Desktop\\Devops\\Individual-project-lachlan\\DevOps_project2024-lachlan\\utils\\read-util.js";var hash="3179ac9353db2f92ce4897fb2e4e2646ac24f949";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\GIGABYTE G5\\Desktop\\Devops\\Individual-project-lachlan\\DevOps_project2024-lachlan\\utils\\read-util.js",statementMap:{"0":{start:{line:1,column:16},end:{line:1,column:44}},"1":{start:{line:5,column:4},end:{line:47,column:5}},"2":{start:{line:6,column:69},end:{line:6,column:78}},"3":{start:{line:9,column:22},end:{line:9,column:24}},"4":{start:{line:11,column:8},end:{line:13,column:9}},"5":{start:{line:12,column:12},end:{line:12,column:44}},"6":{start:{line:15,column:8},end:{line:17,column:9}},"7":{start:{line:16,column:12},end:{line:16,column:63}},"8":{start:{line:19,column:8},end:{line:21,column:9}},"9":{start:{line:20,column:12},end:{line:20,column:42}},"10":{start:{line:24,column:23},end:{line:24,column:48}},"11":{start:{line:27,column:8},end:{line:30,column:9}},"12":{start:{line:28,column:30},end:{line:28,column:57}},"13":{start:{line:29,column:12},end:{line:29,column:78}},"14":{start:{line:29,column:47},end:{line:29,column:76}},"15":{start:{line:33,column:8},end:{line:35,column:9}},"16":{start:{line:34,column:12},end:{line:34,column:81}},"17":{start:{line:38,column:34},end:{line:41,column:11}},"18":{start:{line:38,column:55},end:{line:41,column:9}},"19":{start:{line:43,column:8},end:{line:43,column:55}},"20":{start:{line:45,column:8},end:{line:45,column:57}},"21":{start:{line:46,column:8},end:{line:46,column:83}},"22":{start:{line:50,column:0},end:{line:50,column:33}}},fnMap:{"0":{name:"readStudent",decl:{start:{line:4,column:15},end:{line:4,column:26}},loc:{start:{line:4,column:37},end:{line:48,column:1}},line:4},"1":{name:"(anonymous_1)",decl:{start:{line:29,column:37},end:{line:29,column:38}},loc:{start:{line:29,column:47},end:{line:29,column:76}},line:29},"2":{name:"(anonymous_2)",decl:{start:{line:38,column:47},end:{line:38,column:48}},loc:{start:{line:38,column:55},end:{line:41,column:9}},line:38}},branchMap:{"0":{loc:{start:{line:11,column:8},end:{line:13,column:9}},type:"if",locations:[{start:{line:11,column:8},end:{line:13,column:9}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:11},"1":{loc:{start:{line:15,column:8},end:{line:17,column:9}},type:"if",locations:[{start:{line:15,column:8},end:{line:17,column:9}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:15},"2":{loc:{start:{line:19,column:8},end:{line:21,column:9}},type:"if",locations:[{start:{line:19,column:8},end:{line:21,column:9}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:19},"3":{loc:{start:{line:27,column:8},end:{line:30,column:9}},type:"if",locations:[{start:{line:27,column:8},end:{line:30,column:9}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:27},"4":{loc:{start:{line:28,column:30},end:{line:28,column:57}},type:"cond-expr",locations:[{start:{line:28,column:51},end:{line:28,column:52}},{start:{line:28,column:55},end:{line:28,column:57}}],line:28},"5":{loc:{start:{line:33,column:8},end:{line:35,column:9}},type:"if",locations:[{start:{line:33,column:8},end:{line:35,column:9}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:33}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3179ac9353db2f92ce4897fb2e4e2646ac24f949"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_ymy7bmg10=function(){return actualCoverage;};}return actualCoverage;}cov_ymy7bmg10();const student=(cov_ymy7bmg10().s[0]++,require('../models/Student'));// Function to fetch all student data with server-side filtering, sorting, and searching
async function readStudent(req,res){cov_ymy7bmg10().f[0]++;cov_ymy7bmg10().s[1]++;try{const{adminNumber,searchName,sortCGPA,filterDiploma}=(cov_ymy7bmg10().s[2]++,req.query);// Build query object for MongoDB
const query=(cov_ymy7bmg10().s[3]++,{});cov_ymy7bmg10().s[4]++;if(adminNumber){cov_ymy7bmg10().b[0][0]++;cov_ymy7bmg10().s[5]++;query.adminNumber=adminNumber;}else{cov_ymy7bmg10().b[0][1]++;}cov_ymy7bmg10().s[6]++;if(searchName){cov_ymy7bmg10().b[1][0]++;cov_ymy7bmg10().s[7]++;query.name={$regex:searchName,$options:'i'};// Case-insensitive regex search
}else{cov_ymy7bmg10().b[1][1]++;}cov_ymy7bmg10().s[8]++;if(filterDiploma){cov_ymy7bmg10().b[2][0]++;cov_ymy7bmg10().s[9]++;query.diploma=filterDiploma;}else{cov_ymy7bmg10().b[2][1]++;}// Fetch students from the database
let students=(cov_ymy7bmg10().s[10]++,await student.find(query));// Apply sorting if requested
cov_ymy7bmg10().s[11]++;if(sortCGPA){cov_ymy7bmg10().b[3][0]++;const sortOrder=(cov_ymy7bmg10().s[12]++,sortCGPA==='asc'?(cov_ymy7bmg10().b[4][0]++,1):(cov_ymy7bmg10().b[4][1]++,-1));cov_ymy7bmg10().s[13]++;students=students.sort((a,b)=>{cov_ymy7bmg10().f[1]++;cov_ymy7bmg10().s[14]++;return sortOrder*(a.cGPA-b.cGPA);});}else{cov_ymy7bmg10().b[3][1]++;}// Handle case where no student data is found
cov_ymy7bmg10().s[15]++;if(students.length===0){cov_ymy7bmg10().b[5][0]++;cov_ymy7bmg10().s[16]++;return res.status(404).json({message:'No student records found'});}else{cov_ymy7bmg10().b[5][1]++;}// Format response to include proper type conversions
const formattedStudents=(cov_ymy7bmg10().s[17]++,students.map(stu=>{cov_ymy7bmg10().f[2]++;cov_ymy7bmg10().s[18]++;return{...stu.toObject(),cGPA:stu.cGPA?.toString()};}));cov_ymy7bmg10().s[19]++;return res.status(200).json(formattedStudents);}catch(error){cov_ymy7bmg10().s[20]++;console.error("Error fetching students:",error);cov_ymy7bmg10().s[21]++;return res.status(500).json({message:'Server error: '+error.message});}}cov_ymy7bmg10().s[22]++;module.exports={readStudent};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfeW15N2JtZzEwIiwiYWN0dWFsQ292ZXJhZ2UiLCJzdHVkZW50IiwicyIsInJlcXVpcmUiLCJyZWFkU3R1ZGVudCIsInJlcSIsInJlcyIsImYiLCJhZG1pbk51bWJlciIsInNlYXJjaE5hbWUiLCJzb3J0Q0dQQSIsImZpbHRlckRpcGxvbWEiLCJxdWVyeSIsImIiLCJuYW1lIiwiJHJlZ2V4IiwiJG9wdGlvbnMiLCJkaXBsb21hIiwic3R1ZGVudHMiLCJmaW5kIiwic29ydE9yZGVyIiwic29ydCIsImEiLCJjR1BBIiwibGVuZ3RoIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJmb3JtYXR0ZWRTdHVkZW50cyIsIm1hcCIsInN0dSIsInRvT2JqZWN0IiwidG9TdHJpbmciLCJlcnJvciIsImNvbnNvbGUiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsicmVhZC11dGlsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHN0dWRlbnQgPSByZXF1aXJlKCcuLi9tb2RlbHMvU3R1ZGVudCcpO1xyXG5cclxuLy8gRnVuY3Rpb24gdG8gZmV0Y2ggYWxsIHN0dWRlbnQgZGF0YSB3aXRoIHNlcnZlci1zaWRlIGZpbHRlcmluZywgc29ydGluZywgYW5kIHNlYXJjaGluZ1xyXG5hc3luYyBmdW5jdGlvbiByZWFkU3R1ZGVudChyZXEsIHJlcykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCB7IGFkbWluTnVtYmVyLCBzZWFyY2hOYW1lLCBzb3J0Q0dQQSwgZmlsdGVyRGlwbG9tYSB9ID0gcmVxLnF1ZXJ5O1xyXG5cclxuICAgICAgICAvLyBCdWlsZCBxdWVyeSBvYmplY3QgZm9yIE1vbmdvREJcclxuICAgICAgICBjb25zdCBxdWVyeSA9IHt9O1xyXG5cclxuICAgICAgICBpZiAoYWRtaW5OdW1iZXIpIHtcclxuICAgICAgICAgICAgcXVlcnkuYWRtaW5OdW1iZXIgPSBhZG1pbk51bWJlcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChzZWFyY2hOYW1lKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5Lm5hbWUgPSB7ICRyZWdleDogc2VhcmNoTmFtZSwgJG9wdGlvbnM6ICdpJyB9OyAvLyBDYXNlLWluc2Vuc2l0aXZlIHJlZ2V4IHNlYXJjaFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGZpbHRlckRpcGxvbWEpIHtcclxuICAgICAgICAgICAgcXVlcnkuZGlwbG9tYSA9IGZpbHRlckRpcGxvbWE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBGZXRjaCBzdHVkZW50cyBmcm9tIHRoZSBkYXRhYmFzZVxyXG4gICAgICAgIGxldCBzdHVkZW50cyA9IGF3YWl0IHN0dWRlbnQuZmluZChxdWVyeSk7XHJcblxyXG4gICAgICAgIC8vIEFwcGx5IHNvcnRpbmcgaWYgcmVxdWVzdGVkXHJcbiAgICAgICAgaWYgKHNvcnRDR1BBKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNvcnRPcmRlciA9IHNvcnRDR1BBID09PSAnYXNjJyA/IDEgOiAtMTtcclxuICAgICAgICAgICAgc3R1ZGVudHMgPSBzdHVkZW50cy5zb3J0KChhLCBiKSA9PiBzb3J0T3JkZXIgKiAoYS5jR1BBIC0gYi5jR1BBKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBIYW5kbGUgY2FzZSB3aGVyZSBubyBzdHVkZW50IGRhdGEgaXMgZm91bmRcclxuICAgICAgICBpZiAoc3R1ZGVudHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdObyBzdHVkZW50IHJlY29yZHMgZm91bmQnIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRm9ybWF0IHJlc3BvbnNlIHRvIGluY2x1ZGUgcHJvcGVyIHR5cGUgY29udmVyc2lvbnNcclxuICAgICAgICBjb25zdCBmb3JtYXR0ZWRTdHVkZW50cyA9IHN0dWRlbnRzLm1hcChzdHUgPT4gKHtcclxuICAgICAgICAgICAgLi4uc3R1LnRvT2JqZWN0KCksXHJcbiAgICAgICAgICAgIGNHUEE6IHN0dS5jR1BBPy50b1N0cmluZygpXHJcbiAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oZm9ybWF0dGVkU3R1ZGVudHMpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgc3R1ZGVudHM6XCIsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnU2VydmVyIGVycm9yOiAnICsgZXJyb3IubWVzc2FnZSB9KTtcclxuICAgIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7IHJlYWRTdHVkZW50IH07XHJcbiJdLCJtYXBwaW5ncyI6IjgzSEFlWTtBQUFBQSxhQUFBLFNBQUFBLENBQUEsU0FBQUMsY0FBQSxXQUFBQSxjQUFBLEVBQUFELGFBQUEsR0FmWixLQUFNLENBQUFFLE9BQU8sRUFBQUYsYUFBQSxHQUFBRyxDQUFBLE1BQUdDLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxFQUU1QztBQUNBLGNBQWUsQ0FBQUMsV0FBV0EsQ0FBQ0MsR0FBRyxDQUFFQyxHQUFHLENBQUUsQ0FBQVAsYUFBQSxHQUFBUSxDQUFBLE1BQUFSLGFBQUEsR0FBQUcsQ0FBQSxNQUNqQyxHQUFJLENBQ0EsS0FBTSxDQUFFTSxXQUFXLENBQUVDLFVBQVUsQ0FBRUMsUUFBUSxDQUFFQyxhQUFjLENBQUMsRUFBQVosYUFBQSxHQUFBRyxDQUFBLE1BQUdHLEdBQUcsQ0FBQ08sS0FBSyxFQUV0RTtBQUNBLEtBQU0sQ0FBQUEsS0FBSyxFQUFBYixhQUFBLEdBQUFHLENBQUEsTUFBRyxDQUFDLENBQUMsRUFBQ0gsYUFBQSxHQUFBRyxDQUFBLE1BRWpCLEdBQUlNLFdBQVcsQ0FBRSxDQUFBVCxhQUFBLEdBQUFjLENBQUEsU0FBQWQsYUFBQSxHQUFBRyxDQUFBLE1BQ2JVLEtBQUssQ0FBQ0osV0FBVyxDQUFHQSxXQUFXLENBQ25DLENBQUMsS0FBQVQsYUFBQSxHQUFBYyxDQUFBLFVBQUFkLGFBQUEsR0FBQUcsQ0FBQSxNQUVELEdBQUlPLFVBQVUsQ0FBRSxDQUFBVixhQUFBLEdBQUFjLENBQUEsU0FBQWQsYUFBQSxHQUFBRyxDQUFBLE1BQ1pVLEtBQUssQ0FBQ0UsSUFBSSxDQUFHLENBQUVDLE1BQU0sQ0FBRU4sVUFBVSxDQUFFTyxRQUFRLENBQUUsR0FBSSxDQUFDLENBQUU7QUFDeEQsQ0FBQyxLQUFBakIsYUFBQSxHQUFBYyxDQUFBLFVBQUFkLGFBQUEsR0FBQUcsQ0FBQSxNQUVELEdBQUlTLGFBQWEsQ0FBRSxDQUFBWixhQUFBLEdBQUFjLENBQUEsU0FBQWQsYUFBQSxHQUFBRyxDQUFBLE1BQ2ZVLEtBQUssQ0FBQ0ssT0FBTyxDQUFHTixhQUFhLENBQ2pDLENBQUMsS0FBQVosYUFBQSxHQUFBYyxDQUFBLFVBRUQ7QUFDQSxHQUFJLENBQUFLLFFBQVEsRUFBQW5CLGFBQUEsR0FBQUcsQ0FBQSxPQUFHLEtBQU0sQ0FBQUQsT0FBTyxDQUFDa0IsSUFBSSxDQUFDUCxLQUFLLENBQUMsRUFFeEM7QUFBQWIsYUFBQSxHQUFBRyxDQUFBLE9BQ0EsR0FBSVEsUUFBUSxDQUFFLENBQUFYLGFBQUEsR0FBQWMsQ0FBQSxTQUNWLEtBQU0sQ0FBQU8sU0FBUyxFQUFBckIsYUFBQSxHQUFBRyxDQUFBLE9BQUdRLFFBQVEsR0FBSyxLQUFLLEVBQUFYLGFBQUEsR0FBQWMsQ0FBQSxTQUFHLENBQUMsR0FBQWQsYUFBQSxHQUFBYyxDQUFBLFNBQUcsQ0FBQyxDQUFDLEdBQUNkLGFBQUEsR0FBQUcsQ0FBQSxPQUM5Q2dCLFFBQVEsQ0FBR0EsUUFBUSxDQUFDRyxJQUFJLENBQUMsQ0FBQ0MsQ0FBQyxDQUFFVCxDQUFDLEdBQUssQ0FBQWQsYUFBQSxHQUFBUSxDQUFBLE1BQUFSLGFBQUEsR0FBQUcsQ0FBQSxjQUFBa0IsU0FBUyxFQUFJRSxDQUFDLENBQUNDLElBQUksQ0FBR1YsQ0FBQyxDQUFDVSxJQUFJLENBQUMsQ0FBRCxDQUFDLENBQUMsQ0FDckUsQ0FBQyxLQUFBeEIsYUFBQSxHQUFBYyxDQUFBLFVBRUQ7QUFBQWQsYUFBQSxHQUFBRyxDQUFBLE9BQ0EsR0FBSWdCLFFBQVEsQ0FBQ00sTUFBTSxHQUFLLENBQUMsQ0FBRSxDQUFBekIsYUFBQSxHQUFBYyxDQUFBLFNBQUFkLGFBQUEsR0FBQUcsQ0FBQSxPQUN2QixNQUFPLENBQUFJLEdBQUcsQ0FBQ21CLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLENBQUVDLE9BQU8sQ0FBRSwwQkFBMkIsQ0FBQyxDQUFDLENBQ3hFLENBQUMsS0FBQTVCLGFBQUEsR0FBQWMsQ0FBQSxVQUVEO0FBQ0EsS0FBTSxDQUFBZSxpQkFBaUIsRUFBQTdCLGFBQUEsR0FBQUcsQ0FBQSxPQUFHZ0IsUUFBUSxDQUFDVyxHQUFHLENBQUNDLEdBQUcsRUFBSyxDQUFBL0IsYUFBQSxHQUFBUSxDQUFBLE1BQUFSLGFBQUEsR0FBQUcsQ0FBQSxjQUMzQyxHQUFHNEIsR0FBRyxDQUFDQyxRQUFRLENBQUMsQ0FBQyxDQUNqQlIsSUFBSSxDQUFFTyxHQUFHLENBQUNQLElBQUksRUFBRVMsUUFBUSxDQUFDLENBQzdCLENBQUMsQ0FBRCxDQUFFLENBQUMsRUFBQ2pDLGFBQUEsR0FBQUcsQ0FBQSxPQUVKLE1BQU8sQ0FBQUksR0FBRyxDQUFDbUIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUNFLGlCQUFpQixDQUFDLENBQ2xELENBQUUsTUFBT0ssS0FBSyxDQUFFLENBQUFsQyxhQUFBLEdBQUFHLENBQUEsT0FDWmdDLE9BQU8sQ0FBQ0QsS0FBSyxDQUFDLDBCQUEwQixDQUFFQSxLQUFLLENBQUMsQ0FBQ2xDLGFBQUEsR0FBQUcsQ0FBQSxPQUNqRCxNQUFPLENBQUFJLEdBQUcsQ0FBQ21CLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLENBQUVDLE9BQU8sQ0FBRSxnQkFBZ0IsQ0FBR00sS0FBSyxDQUFDTixPQUFRLENBQUMsQ0FBQyxDQUM5RSxDQUNKLENBQUM1QixhQUFBLEdBQUFHLENBQUEsT0FFRGlDLE1BQU0sQ0FBQ0MsT0FBTyxDQUFHLENBQUVoQyxXQUFZLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=
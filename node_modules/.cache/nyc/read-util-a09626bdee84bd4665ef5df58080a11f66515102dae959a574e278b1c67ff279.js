function cov_ymy7bmg10(){var path="C:\\Users\\GIGABYTE G5\\Desktop\\Devops\\Individual-project-lachlan\\DevOps_project2024-lachlan\\utils\\read-util.js";var hash="6b76d99f17d13830f994606a49c46c4c1841e75f";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\GIGABYTE G5\\Desktop\\Devops\\Individual-project-lachlan\\DevOps_project2024-lachlan\\utils\\read-util.js",statementMap:{"0":{start:{line:1,column:16},end:{line:1,column:44}},"1":{start:{line:2,column:23},end:{line:2,column:41}},"2":{start:{line:6,column:4},end:{line:40,column:5}},"3":{start:{line:8,column:32},end:{line:8,column:41}},"4":{start:{line:11,column:8},end:{line:11,column:52}},"5":{start:{line:14,column:22},end:{line:14,column:56}},"6":{start:{line:15,column:25},end:{line:15,column:50}},"7":{start:{line:18,column:8},end:{line:20,column:9}},"8":{start:{line:19,column:12},end:{line:19,column:81}},"9":{start:{line:23,column:34},end:{line:34,column:10}},"10":{start:{line:24,column:33},end:{line:24,column:47}},"11":{start:{line:27,column:12},end:{line:31,column:13}},"12":{start:{line:28,column:16},end:{line:28,column:65}},"13":{start:{line:29,column:19},end:{line:31,column:13}},"14":{start:{line:30,column:16},end:{line:30,column:41}},"15":{start:{line:33,column:12},end:{line:33,column:32}},"16":{start:{line:36,column:8},end:{line:36,column:55}},"17":{start:{line:38,column:8},end:{line:38,column:57}},"18":{start:{line:39,column:8},end:{line:39,column:83}},"19":{start:{line:43,column:0},end:{line:43,column:33}}},fnMap:{"0":{name:"readStudent",decl:{start:{line:5,column:15},end:{line:5,column:26}},loc:{start:{line:5,column:37},end:{line:41,column:1}},line:5},"1":{name:"(anonymous_1)",decl:{start:{line:23,column:47},end:{line:23,column:48}},loc:{start:{line:23,column:54},end:{line:34,column:9}},line:23}},branchMap:{"0":{loc:{start:{line:14,column:22},end:{line:14,column:56}},type:"cond-expr",locations:[{start:{line:14,column:36},end:{line:14,column:51}},{start:{line:14,column:54},end:{line:14,column:56}}],line:14},"1":{loc:{start:{line:18,column:8},end:{line:20,column:9}},type:"if",locations:[{start:{line:18,column:8},end:{line:20,column:9}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:18},"2":{loc:{start:{line:27,column:12},end:{line:31,column:13}},type:"if",locations:[{start:{line:27,column:12},end:{line:31,column:13}},{start:{line:29,column:19},end:{line:31,column:13}}],line:27},"3":{loc:{start:{line:29,column:19},end:{line:31,column:13}},type:"if",locations:[{start:{line:29,column:19},end:{line:31,column:13}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:29}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0},f:{"0":0,"1":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6b76d99f17d13830f994606a49c46c4c1841e75f"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_ymy7bmg10=function(){return actualCoverage;};}return actualCoverage;}cov_ymy7bmg10();const student=(cov_ymy7bmg10().s[0]++,require('../models/Student'));const{Decimal128}=(cov_ymy7bmg10().s[1]++,require('mongodb'));// Import Decimal128 to check the type
// Function to fetch all student data
async function readStudent(req,res){cov_ymy7bmg10().f[0]++;cov_ymy7bmg10().s[2]++;try{// Validate query parameters
const{adminNumber}=(cov_ymy7bmg10().s[3]++,req.query);// Log the query parameters
cov_ymy7bmg10().s[4]++;console.log('Query parameters:',req.query);// Fetch data based on query or return all
const query=(cov_ymy7bmg10().s[5]++,adminNumber?(cov_ymy7bmg10().b[0][0]++,{adminNumber}):(cov_ymy7bmg10().b[0][1]++,{}));const students=(cov_ymy7bmg10().s[6]++,await student.find(query));// Handle case where no student data is found
cov_ymy7bmg10().s[7]++;if(students.length===0){cov_ymy7bmg10().b[1][0]++;cov_ymy7bmg10().s[8]++;return res.status(404).json({message:'No student records found'});}else{cov_ymy7bmg10().b[1][1]++;}// Format response to include proper type conversions
const formattedStudents=(cov_ymy7bmg10().s[9]++,students.map(stu=>{cov_ymy7bmg10().f[1]++;const formattedStu=(cov_ymy7bmg10().s[10]++,stu.toObject());// Check if cGPA is an instance of Decimal128 and convert to string
cov_ymy7bmg10().s[11]++;if(formattedStu.cGPA instanceof Decimal128){cov_ymy7bmg10().b[2][0]++;cov_ymy7bmg10().s[12]++;formattedStu.cGPA=formattedStu.cGPA.toString();// Convert to string
}else{cov_ymy7bmg10().b[2][1]++;cov_ymy7bmg10().s[13]++;if(formattedStu.cGPA===undefined){cov_ymy7bmg10().b[3][0]++;cov_ymy7bmg10().s[14]++;formattedStu.cGPA=null;// If cGPA is undefined, set it to null
}else{cov_ymy7bmg10().b[3][1]++;}}cov_ymy7bmg10().s[15]++;return formattedStu;}));cov_ymy7bmg10().s[16]++;return res.status(200).json(formattedStudents);}catch(error){cov_ymy7bmg10().s[17]++;console.error("Error fetching students:",error);cov_ymy7bmg10().s[18]++;return res.status(500).json({message:'Server error: '+error.message});}}cov_ymy7bmg10().s[19]++;module.exports={readStudent};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfeW15N2JtZzEwIiwiYWN0dWFsQ292ZXJhZ2UiLCJzdHVkZW50IiwicyIsInJlcXVpcmUiLCJEZWNpbWFsMTI4IiwicmVhZFN0dWRlbnQiLCJyZXEiLCJyZXMiLCJmIiwiYWRtaW5OdW1iZXIiLCJxdWVyeSIsImNvbnNvbGUiLCJsb2ciLCJiIiwic3R1ZGVudHMiLCJmaW5kIiwibGVuZ3RoIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJmb3JtYXR0ZWRTdHVkZW50cyIsIm1hcCIsInN0dSIsImZvcm1hdHRlZFN0dSIsInRvT2JqZWN0IiwiY0dQQSIsInRvU3RyaW5nIiwidW5kZWZpbmVkIiwiZXJyb3IiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsicmVhZC11dGlsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHN0dWRlbnQgPSByZXF1aXJlKCcuLi9tb2RlbHMvU3R1ZGVudCcpO1xyXG5jb25zdCB7IERlY2ltYWwxMjggfSA9IHJlcXVpcmUoJ21vbmdvZGInKTsgLy8gSW1wb3J0IERlY2ltYWwxMjggdG8gY2hlY2sgdGhlIHR5cGVcclxuXHJcbi8vIEZ1bmN0aW9uIHRvIGZldGNoIGFsbCBzdHVkZW50IGRhdGFcclxuYXN5bmMgZnVuY3Rpb24gcmVhZFN0dWRlbnQocmVxLCByZXMpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgLy8gVmFsaWRhdGUgcXVlcnkgcGFyYW1ldGVyc1xyXG4gICAgICAgIGNvbnN0IHsgYWRtaW5OdW1iZXIgfSA9IHJlcS5xdWVyeTtcclxuXHJcbiAgICAgICAgLy8gTG9nIHRoZSBxdWVyeSBwYXJhbWV0ZXJzXHJcbiAgICAgICAgY29uc29sZS5sb2coJ1F1ZXJ5IHBhcmFtZXRlcnM6JywgcmVxLnF1ZXJ5KTtcclxuXHJcbiAgICAgICAgLy8gRmV0Y2ggZGF0YSBiYXNlZCBvbiBxdWVyeSBvciByZXR1cm4gYWxsXHJcbiAgICAgICAgY29uc3QgcXVlcnkgPSBhZG1pbk51bWJlciA/IHsgYWRtaW5OdW1iZXIgfSA6IHt9O1xyXG4gICAgICAgIGNvbnN0IHN0dWRlbnRzID0gYXdhaXQgc3R1ZGVudC5maW5kKHF1ZXJ5KTtcclxuXHJcbiAgICAgICAgLy8gSGFuZGxlIGNhc2Ugd2hlcmUgbm8gc3R1ZGVudCBkYXRhIGlzIGZvdW5kXHJcbiAgICAgICAgaWYgKHN0dWRlbnRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnTm8gc3R1ZGVudCByZWNvcmRzIGZvdW5kJyB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEZvcm1hdCByZXNwb25zZSB0byBpbmNsdWRlIHByb3BlciB0eXBlIGNvbnZlcnNpb25zXHJcbiAgICAgICAgY29uc3QgZm9ybWF0dGVkU3R1ZGVudHMgPSBzdHVkZW50cy5tYXAoc3R1ID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZm9ybWF0dGVkU3R1ID0gc3R1LnRvT2JqZWN0KCk7XHJcblxyXG4gICAgICAgICAgICAvLyBDaGVjayBpZiBjR1BBIGlzIGFuIGluc3RhbmNlIG9mIERlY2ltYWwxMjggYW5kIGNvbnZlcnQgdG8gc3RyaW5nXHJcbiAgICAgICAgICAgIGlmIChmb3JtYXR0ZWRTdHUuY0dQQSBpbnN0YW5jZW9mIERlY2ltYWwxMjgpIHtcclxuICAgICAgICAgICAgICAgIGZvcm1hdHRlZFN0dS5jR1BBID0gZm9ybWF0dGVkU3R1LmNHUEEudG9TdHJpbmcoKTsgIC8vIENvbnZlcnQgdG8gc3RyaW5nXHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZm9ybWF0dGVkU3R1LmNHUEEgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgZm9ybWF0dGVkU3R1LmNHUEEgPSBudWxsOyAgLy8gSWYgY0dQQSBpcyB1bmRlZmluZWQsIHNldCBpdCB0byBudWxsXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmb3JtYXR0ZWRTdHU7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihmb3JtYXR0ZWRTdHVkZW50cyk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBzdHVkZW50czpcIiwgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdTZXJ2ZXIgZXJyb3I6ICcgKyBlcnJvci5tZXNzYWdlIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHsgcmVhZFN0dWRlbnQgfTtcclxuIl0sIm1hcHBpbmdzIjoiNGtHQWVZO0FBQUFBLGFBQUEsU0FBQUEsQ0FBQSxTQUFBQyxjQUFBLFdBQUFBLGNBQUEsRUFBQUQsYUFBQSxHQWZaLEtBQU0sQ0FBQUUsT0FBTyxFQUFBRixhQUFBLEdBQUFHLENBQUEsTUFBR0MsT0FBTyxDQUFDLG1CQUFtQixDQUFDLEVBQzVDLEtBQU0sQ0FBRUMsVUFBVyxDQUFDLEVBQUFMLGFBQUEsR0FBQUcsQ0FBQSxNQUFHQyxPQUFPLENBQUMsU0FBUyxDQUFDLEVBQUU7QUFFM0M7QUFDQSxjQUFlLENBQUFFLFdBQVdBLENBQUNDLEdBQUcsQ0FBRUMsR0FBRyxDQUFFLENBQUFSLGFBQUEsR0FBQVMsQ0FBQSxNQUFBVCxhQUFBLEdBQUFHLENBQUEsTUFDakMsR0FBSSxDQUNBO0FBQ0EsS0FBTSxDQUFFTyxXQUFZLENBQUMsRUFBQVYsYUFBQSxHQUFBRyxDQUFBLE1BQUdJLEdBQUcsQ0FBQ0ksS0FBSyxFQUVqQztBQUFBWCxhQUFBLEdBQUFHLENBQUEsTUFDQVMsT0FBTyxDQUFDQyxHQUFHLENBQUMsbUJBQW1CLENBQUVOLEdBQUcsQ0FBQ0ksS0FBSyxDQUFDLENBRTNDO0FBQ0EsS0FBTSxDQUFBQSxLQUFLLEVBQUFYLGFBQUEsR0FBQUcsQ0FBQSxNQUFHTyxXQUFXLEVBQUFWLGFBQUEsR0FBQWMsQ0FBQSxTQUFHLENBQUVKLFdBQVksQ0FBQyxHQUFBVixhQUFBLEdBQUFjLENBQUEsU0FBRyxDQUFDLENBQUMsR0FDaEQsS0FBTSxDQUFBQyxRQUFRLEVBQUFmLGFBQUEsR0FBQUcsQ0FBQSxNQUFHLEtBQU0sQ0FBQUQsT0FBTyxDQUFDYyxJQUFJLENBQUNMLEtBQUssQ0FBQyxFQUUxQztBQUFBWCxhQUFBLEdBQUFHLENBQUEsTUFDQSxHQUFJWSxRQUFRLENBQUNFLE1BQU0sR0FBSyxDQUFDLENBQUUsQ0FBQWpCLGFBQUEsR0FBQWMsQ0FBQSxTQUFBZCxhQUFBLEdBQUFHLENBQUEsTUFDdkIsTUFBTyxDQUFBSyxHQUFHLENBQUNVLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLENBQUVDLE9BQU8sQ0FBRSwwQkFBMkIsQ0FBQyxDQUFDLENBQ3hFLENBQUMsS0FBQXBCLGFBQUEsR0FBQWMsQ0FBQSxVQUVEO0FBQ0EsS0FBTSxDQUFBTyxpQkFBaUIsRUFBQXJCLGFBQUEsR0FBQUcsQ0FBQSxNQUFHWSxRQUFRLENBQUNPLEdBQUcsQ0FBQ0MsR0FBRyxFQUFJLENBQUF2QixhQUFBLEdBQUFTLENBQUEsTUFDMUMsS0FBTSxDQUFBZSxZQUFZLEVBQUF4QixhQUFBLEdBQUFHLENBQUEsT0FBR29CLEdBQUcsQ0FBQ0UsUUFBUSxDQUFDLENBQUMsRUFFbkM7QUFBQXpCLGFBQUEsR0FBQUcsQ0FBQSxPQUNBLEdBQUlxQixZQUFZLENBQUNFLElBQUksV0FBWSxDQUFBckIsVUFBVSxDQUFFLENBQUFMLGFBQUEsR0FBQWMsQ0FBQSxTQUFBZCxhQUFBLEdBQUFHLENBQUEsT0FDekNxQixZQUFZLENBQUNFLElBQUksQ0FBR0YsWUFBWSxDQUFDRSxJQUFJLENBQUNDLFFBQVEsQ0FBQyxDQUFDLENBQUc7QUFDdkQsQ0FBQyxJQUFNLENBQUEzQixhQUFBLEdBQUFjLENBQUEsU0FBQWQsYUFBQSxHQUFBRyxDQUFBLFVBQUlxQixZQUFZLENBQUNFLElBQUksR0FBS0UsU0FBUyxDQUFFLENBQUE1QixhQUFBLEdBQUFjLENBQUEsU0FBQWQsYUFBQSxHQUFBRyxDQUFBLE9BQ3hDcUIsWUFBWSxDQUFDRSxJQUFJLENBQUcsSUFBSSxDQUFHO0FBQy9CLENBQUMsS0FBQTFCLGFBQUEsR0FBQWMsQ0FBQSxVQUFELENBQUNkLGFBQUEsR0FBQUcsQ0FBQSxPQUVELE1BQU8sQ0FBQXFCLFlBQVksQ0FDdkIsQ0FBQyxDQUFDLEVBQUN4QixhQUFBLEdBQUFHLENBQUEsT0FFSCxNQUFPLENBQUFLLEdBQUcsQ0FBQ1UsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUNFLGlCQUFpQixDQUFDLENBQ2xELENBQUUsTUFBT1EsS0FBSyxDQUFFLENBQUE3QixhQUFBLEdBQUFHLENBQUEsT0FDWlMsT0FBTyxDQUFDaUIsS0FBSyxDQUFDLDBCQUEwQixDQUFFQSxLQUFLLENBQUMsQ0FBQzdCLGFBQUEsR0FBQUcsQ0FBQSxPQUNqRCxNQUFPLENBQUFLLEdBQUcsQ0FBQ1UsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUMsQ0FBRUMsT0FBTyxDQUFFLGdCQUFnQixDQUFHUyxLQUFLLENBQUNULE9BQVEsQ0FBQyxDQUFDLENBQzlFLENBQ0osQ0FBQ3BCLGFBQUEsR0FBQUcsQ0FBQSxPQUVEMkIsTUFBTSxDQUFDQyxPQUFPLENBQUcsQ0FBRXpCLFdBQVksQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==
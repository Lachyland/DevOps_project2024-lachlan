function cov_ymy7bmg10(){var path="C:\\Users\\GIGABYTE G5\\Desktop\\Devops\\Individual-project-lachlan\\DevOps_project2024-lachlan\\utils\\read-util.js";var hash="8089dcda782883a009ea9bef6fae1d77dd9c3746";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\GIGABYTE G5\\Desktop\\Devops\\Individual-project-lachlan\\DevOps_project2024-lachlan\\utils\\read-util.js",statementMap:{"0":{start:{line:1,column:16},end:{line:1,column:44}},"1":{start:{line:5,column:4},end:{line:38,column:5}},"2":{start:{line:7,column:28},end:{line:7,column:48}},"3":{start:{line:10,column:8},end:{line:12,column:9}},"4":{start:{line:11,column:12},end:{line:11,column:91}},"5":{start:{line:15,column:29},end:{line:27,column:10}},"6":{start:{line:16,column:34},end:{line:16,column:52}},"7":{start:{line:19,column:12},end:{line:24,column:13}},"8":{start:{line:20,column:16},end:{line:20,column:93}},"9":{start:{line:21,column:16},end:{line:21,column:42}},"10":{start:{line:23,column:16},end:{line:23,column:67}},"11":{start:{line:26,column:12},end:{line:26,column:33}},"12":{start:{line:29,column:8},end:{line:29,column:50}},"13":{start:{line:32,column:8},end:{line:32,column:57}},"14":{start:{line:35,column:29},end:{line:35,column:107}},"15":{start:{line:37,column:8},end:{line:37,column:63}},"16":{start:{line:41,column:0},end:{line:43,column:2}}},fnMap:{"0":{name:"readStudent",decl:{start:{line:4,column:15},end:{line:4,column:26}},loc:{start:{line:4,column:37},end:{line:39,column:1}},line:4},"1":{name:"(anonymous_1)",decl:{start:{line:15,column:45},end:{line:15,column:46}},loc:{start:{line:15,column:56},end:{line:27,column:9}},line:15}},branchMap:{"0":{loc:{start:{line:10,column:8},end:{line:12,column:9}},type:"if",locations:[{start:{line:10,column:8},end:{line:12,column:9}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:10},"1":{loc:{start:{line:10,column:12},end:{line:10,column:52}},type:"binary-expr",locations:[{start:{line:10,column:12},end:{line:10,column:24}},{start:{line:10,column:28},end:{line:10,column:52}}],line:10},"2":{loc:{start:{line:19,column:12},end:{line:24,column:13}},type:"if",locations:[{start:{line:19,column:12},end:{line:24,column:13}},{start:{line:22,column:19},end:{line:24,column:13}}],line:19},"3":{loc:{start:{line:19,column:16},end:{line:19,column:109}},type:"binary-expr",locations:[{start:{line:19,column:16},end:{line:19,column:35}},{start:{line:19,column:39},end:{line:19,column:77}},{start:{line:19,column:81},end:{line:19,column:109}}],line:19},"4":{loc:{start:{line:35,column:29},end:{line:35,column:107}},type:"cond-expr",locations:[{start:{line:35,column:64},end:{line:35,column:91}},{start:{line:35,column:94},end:{line:35,column:107}}],line:35}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0},f:{"0":0,"1":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0,0],"4":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8089dcda782883a009ea9bef6fae1d77dd9c3746"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_ymy7bmg10=function(){return actualCoverage;};}return actualCoverage;}cov_ymy7bmg10();const student=(cov_ymy7bmg10().s[0]++,require('../models/Student'));// Import the model directly
// Function to fetch all student data
async function readStudent(req,res){cov_ymy7bmg10().f[0]++;cov_ymy7bmg10().s[1]++;try{// Fetch all students from the database
const allStudents=(cov_ymy7bmg10().s[2]++,await student.find());// Validate if any students exist in the database
cov_ymy7bmg10().s[3]++;if((cov_ymy7bmg10().b[1][0]++,!allStudents)||(cov_ymy7bmg10().b[1][1]++,allStudents.length===0)){cov_ymy7bmg10().b[0][0]++;cov_ymy7bmg10().s[4]++;return res.status(404).json({message:"No students found in the database."});}else{cov_ymy7bmg10().b[0][1]++;}// Convert cGPA to string if needed and validate individual student data
const studentsData=(cov_ymy7bmg10().s[5]++,allStudents.map(student=>{cov_ymy7bmg10().f[1]++;const studentObject=(cov_ymy7bmg10().s[6]++,student.toObject());// Check if `cGPA` exists and is a valid Decimal128 type
cov_ymy7bmg10().s[7]++;if((cov_ymy7bmg10().b[3][0]++,!studentObject.cGPA)||(cov_ymy7bmg10().b[3][1]++,typeof studentObject.cGPA!=='object')||(cov_ymy7bmg10().b[3][2]++,!studentObject.cGPA.toString)){cov_ymy7bmg10().b[2][0]++;cov_ymy7bmg10().s[8]++;console.warn(`Invalid or missing cGPA for student ID: ${studentObject._id}`);cov_ymy7bmg10().s[9]++;studentObject.cGPA=null;// Set to null if invalid
}else{cov_ymy7bmg10().b[2][1]++;cov_ymy7bmg10().s[10]++;studentObject.cGPA=studentObject.cGPA.toString();// Convert Decimal128 to string
}cov_ymy7bmg10().s[11]++;return studentObject;}));cov_ymy7bmg10().s[12]++;return res.status(200).json(studentsData);}catch(error){cov_ymy7bmg10().s[13]++;// Log the error for debugging
console.error("Error fetching students:",error);// Differentiate between client and server errors
const errorMessage=(cov_ymy7bmg10().s[14]++,error.name==='ValidationError'?(cov_ymy7bmg10().b[4][0]++,"Invalid query parameters."):(cov_ymy7bmg10().b[4][1]++,error.message));cov_ymy7bmg10().s[15]++;return res.status(500).json({message:errorMessage});}}cov_ymy7bmg10().s[16]++;module.exports={readStudent};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfeW15N2JtZzEwIiwiYWN0dWFsQ292ZXJhZ2UiLCJzdHVkZW50IiwicyIsInJlcXVpcmUiLCJyZWFkU3R1ZGVudCIsInJlcSIsInJlcyIsImYiLCJhbGxTdHVkZW50cyIsImZpbmQiLCJiIiwibGVuZ3RoIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJzdHVkZW50c0RhdGEiLCJtYXAiLCJzdHVkZW50T2JqZWN0IiwidG9PYmplY3QiLCJjR1BBIiwidG9TdHJpbmciLCJjb25zb2xlIiwid2FybiIsIl9pZCIsImVycm9yIiwiZXJyb3JNZXNzYWdlIiwibmFtZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJyZWFkLXV0aWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgc3R1ZGVudCA9IHJlcXVpcmUoJy4uL21vZGVscy9TdHVkZW50Jyk7IC8vIEltcG9ydCB0aGUgbW9kZWwgZGlyZWN0bHlcclxuXHJcbi8vIEZ1bmN0aW9uIHRvIGZldGNoIGFsbCBzdHVkZW50IGRhdGFcclxuYXN5bmMgZnVuY3Rpb24gcmVhZFN0dWRlbnQocmVxLCByZXMpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgLy8gRmV0Y2ggYWxsIHN0dWRlbnRzIGZyb20gdGhlIGRhdGFiYXNlXHJcbiAgICAgICAgY29uc3QgYWxsU3R1ZGVudHMgPSBhd2FpdCBzdHVkZW50LmZpbmQoKTtcclxuXHJcbiAgICAgICAgLy8gVmFsaWRhdGUgaWYgYW55IHN0dWRlbnRzIGV4aXN0IGluIHRoZSBkYXRhYmFzZVxyXG4gICAgICAgIGlmICghYWxsU3R1ZGVudHMgfHwgYWxsU3R1ZGVudHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6IFwiTm8gc3R1ZGVudHMgZm91bmQgaW4gdGhlIGRhdGFiYXNlLlwiIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ29udmVydCBjR1BBIHRvIHN0cmluZyBpZiBuZWVkZWQgYW5kIHZhbGlkYXRlIGluZGl2aWR1YWwgc3R1ZGVudCBkYXRhXHJcbiAgICAgICAgY29uc3Qgc3R1ZGVudHNEYXRhID0gYWxsU3R1ZGVudHMubWFwKHN0dWRlbnQgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBzdHVkZW50T2JqZWN0ID0gc3R1ZGVudC50b09iamVjdCgpO1xyXG5cclxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgYGNHUEFgIGV4aXN0cyBhbmQgaXMgYSB2YWxpZCBEZWNpbWFsMTI4IHR5cGVcclxuICAgICAgICAgICAgaWYgKCFzdHVkZW50T2JqZWN0LmNHUEEgfHwgdHlwZW9mIHN0dWRlbnRPYmplY3QuY0dQQSAhPT0gJ29iamVjdCcgfHwgIXN0dWRlbnRPYmplY3QuY0dQQS50b1N0cmluZykge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBJbnZhbGlkIG9yIG1pc3NpbmcgY0dQQSBmb3Igc3R1ZGVudCBJRDogJHtzdHVkZW50T2JqZWN0Ll9pZH1gKTtcclxuICAgICAgICAgICAgICAgIHN0dWRlbnRPYmplY3QuY0dQQSA9IG51bGw7IC8vIFNldCB0byBudWxsIGlmIGludmFsaWRcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHN0dWRlbnRPYmplY3QuY0dQQSA9IHN0dWRlbnRPYmplY3QuY0dQQS50b1N0cmluZygpOyAvLyBDb252ZXJ0IERlY2ltYWwxMjggdG8gc3RyaW5nXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzdHVkZW50T2JqZWN0O1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oc3R1ZGVudHNEYXRhKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgLy8gTG9nIHRoZSBlcnJvciBmb3IgZGVidWdnaW5nXHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIHN0dWRlbnRzOlwiLCBlcnJvcik7XHJcblxyXG4gICAgICAgIC8vIERpZmZlcmVudGlhdGUgYmV0d2VlbiBjbGllbnQgYW5kIHNlcnZlciBlcnJvcnNcclxuICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvci5uYW1lID09PSAnVmFsaWRhdGlvbkVycm9yJyA/IFwiSW52YWxpZCBxdWVyeSBwYXJhbWV0ZXJzLlwiIDogZXJyb3IubWVzc2FnZTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogZXJyb3JNZXNzYWdlIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICAgIHJlYWRTdHVkZW50LFxyXG59O1xyXG4iXSwibWFwcGluZ3MiOiI2b0dBZVk7QUFBQUEsYUFBQSxTQUFBQSxDQUFBLFNBQUFDLGNBQUEsV0FBQUEsY0FBQSxFQUFBRCxhQUFBLEdBZlosS0FBTSxDQUFBRSxPQUFPLEVBQUFGLGFBQUEsR0FBQUcsQ0FBQSxNQUFHQyxPQUFPLENBQUMsbUJBQW1CLENBQUMsRUFBRTtBQUU5QztBQUNBLGNBQWUsQ0FBQUMsV0FBV0EsQ0FBQ0MsR0FBRyxDQUFFQyxHQUFHLENBQUUsQ0FBQVAsYUFBQSxHQUFBUSxDQUFBLE1BQUFSLGFBQUEsR0FBQUcsQ0FBQSxNQUNqQyxHQUFJLENBQ0E7QUFDQSxLQUFNLENBQUFNLFdBQVcsRUFBQVQsYUFBQSxHQUFBRyxDQUFBLE1BQUcsS0FBTSxDQUFBRCxPQUFPLENBQUNRLElBQUksQ0FBQyxDQUFDLEVBRXhDO0FBQUFWLGFBQUEsR0FBQUcsQ0FBQSxNQUNBLEdBQUksQ0FBQUgsYUFBQSxHQUFBVyxDQUFBLFVBQUNGLFdBQVcsSUFBQVQsYUFBQSxHQUFBVyxDQUFBLFNBQUlGLFdBQVcsQ0FBQ0csTUFBTSxHQUFLLENBQUMsRUFBRSxDQUFBWixhQUFBLEdBQUFXLENBQUEsU0FBQVgsYUFBQSxHQUFBRyxDQUFBLE1BQzFDLE1BQU8sQ0FBQUksR0FBRyxDQUFDTSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQyxDQUFFQyxPQUFPLENBQUUsb0NBQXFDLENBQUMsQ0FBQyxDQUNsRixDQUFDLEtBQUFmLGFBQUEsR0FBQVcsQ0FBQSxVQUVEO0FBQ0EsS0FBTSxDQUFBSyxZQUFZLEVBQUFoQixhQUFBLEdBQUFHLENBQUEsTUFBR00sV0FBVyxDQUFDUSxHQUFHLENBQUNmLE9BQU8sRUFBSSxDQUFBRixhQUFBLEdBQUFRLENBQUEsTUFDNUMsS0FBTSxDQUFBVSxhQUFhLEVBQUFsQixhQUFBLEdBQUFHLENBQUEsTUFBR0QsT0FBTyxDQUFDaUIsUUFBUSxDQUFDLENBQUMsRUFFeEM7QUFBQW5CLGFBQUEsR0FBQUcsQ0FBQSxNQUNBLEdBQUksQ0FBQUgsYUFBQSxHQUFBVyxDQUFBLFVBQUNPLGFBQWEsQ0FBQ0UsSUFBSSxJQUFBcEIsYUFBQSxHQUFBVyxDQUFBLFNBQUksTUFBTyxDQUFBTyxhQUFhLENBQUNFLElBQUksR0FBSyxRQUFRLElBQUFwQixhQUFBLEdBQUFXLENBQUEsU0FBSSxDQUFDTyxhQUFhLENBQUNFLElBQUksQ0FBQ0MsUUFBUSxFQUFFLENBQUFyQixhQUFBLEdBQUFXLENBQUEsU0FBQVgsYUFBQSxHQUFBRyxDQUFBLE1BQy9GbUIsT0FBTyxDQUFDQyxJQUFJLENBQUMsMkNBQTJDTCxhQUFhLENBQUNNLEdBQUcsRUFBRSxDQUFDLENBQUN4QixhQUFBLEdBQUFHLENBQUEsTUFDN0VlLGFBQWEsQ0FBQ0UsSUFBSSxDQUFHLElBQUksQ0FBRTtBQUMvQixDQUFDLElBQU0sQ0FBQXBCLGFBQUEsR0FBQVcsQ0FBQSxTQUFBWCxhQUFBLEdBQUFHLENBQUEsT0FDSGUsYUFBYSxDQUFDRSxJQUFJLENBQUdGLGFBQWEsQ0FBQ0UsSUFBSSxDQUFDQyxRQUFRLENBQUMsQ0FBQyxDQUFFO0FBQ3hELENBQUNyQixhQUFBLEdBQUFHLENBQUEsT0FFRCxNQUFPLENBQUFlLGFBQWEsQ0FDeEIsQ0FBQyxDQUFDLEVBQUNsQixhQUFBLEdBQUFHLENBQUEsT0FFSCxNQUFPLENBQUFJLEdBQUcsQ0FBQ00sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUNFLFlBQVksQ0FBQyxDQUM3QyxDQUFFLE1BQU9TLEtBQUssQ0FBRSxDQUFBekIsYUFBQSxHQUFBRyxDQUFBLE9BQ1o7QUFDQW1CLE9BQU8sQ0FBQ0csS0FBSyxDQUFDLDBCQUEwQixDQUFFQSxLQUFLLENBQUMsQ0FFaEQ7QUFDQSxLQUFNLENBQUFDLFlBQVksRUFBQTFCLGFBQUEsR0FBQUcsQ0FBQSxPQUFHc0IsS0FBSyxDQUFDRSxJQUFJLEdBQUssaUJBQWlCLEVBQUEzQixhQUFBLEdBQUFXLENBQUEsU0FBRywyQkFBMkIsR0FBQVgsYUFBQSxHQUFBVyxDQUFBLFNBQUdjLEtBQUssQ0FBQ1YsT0FBTyxHQUFDZixhQUFBLEdBQUFHLENBQUEsT0FFcEcsTUFBTyxDQUFBSSxHQUFHLENBQUNNLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLENBQUVDLE9BQU8sQ0FBRVcsWUFBYSxDQUFDLENBQUMsQ0FDMUQsQ0FDSixDQUFDMUIsYUFBQSxHQUFBRyxDQUFBLE9BRUR5QixNQUFNLENBQUNDLE9BQU8sQ0FBRyxDQUNieEIsV0FDSixDQUFDIiwiaWdub3JlTGlzdCI6W119
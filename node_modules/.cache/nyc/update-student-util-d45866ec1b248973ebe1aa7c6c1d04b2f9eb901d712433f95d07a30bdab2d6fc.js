function cov_1r9u4b0v5t(){var path="C:\\Users\\GIGABYTE G5\\Desktop\\Devops\\Individual-project-lachlan\\DevOps_project2024-lachlan\\utils\\update-student-util.js";var hash="311e8b80dc1d88311f25c58d90b6ea6e8eff6f88";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\GIGABYTE G5\\Desktop\\Devops\\Individual-project-lachlan\\DevOps_project2024-lachlan\\utils\\update-student-util.js",statementMap:{"0":{start:{line:1,column:11},end:{line:1,column:33}},"1":{start:{line:4,column:4},end:{line:35,column:5}},"2":{start:{line:5,column:60},end:{line:5,column:68}},"3":{start:{line:8,column:29},end:{line:8,column:75}},"4":{start:{line:9,column:25},end:{line:9,column:49}},"5":{start:{line:12,column:29},end:{line:12,column:95}},"6":{start:{line:12,column:59},end:{line:12,column:94}},"7":{start:{line:14,column:8},end:{line:16,column:9}},"8":{start:{line:15,column:12},end:{line:15,column:74}},"9":{start:{line:19,column:8},end:{line:25,column:10}},"10":{start:{line:28,column:8},end:{line:28,column:82}},"11":{start:{line:31,column:8},end:{line:31,column:95}},"12":{start:{line:33,column:8},end:{line:33,column:56}},"13":{start:{line:34,column:8},end:{line:34,column:76}},"14":{start:{line:38,column:0},end:{line:38,column:31}}},fnMap:{"0":{name:"updateStudent",decl:{start:{line:3,column:15},end:{line:3,column:28}},loc:{start:{line:3,column:39},end:{line:36,column:1}},line:3},"1":{name:"(anonymous_1)",decl:{start:{line:12,column:48},end:{line:12,column:49}},loc:{start:{line:12,column:59},end:{line:12,column:94}},line:12}},branchMap:{"0":{loc:{start:{line:14,column:8},end:{line:16,column:9}},type:"if",locations:[{start:{line:14,column:8},end:{line:16,column:9}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:14}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},f:{"0":0,"1":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"311e8b80dc1d88311f25c58d90b6ea6e8eff6f88"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1r9u4b0v5t=function(){return actualCoverage;};}return actualCoverage;}cov_1r9u4b0v5t();const fs=(cov_1r9u4b0v5t().s[0]++,require('fs').promises);async function updateStudent(req,res){cov_1r9u4b0v5t().f[0]++;cov_1r9u4b0v5t().s[1]++;try{const{adminNumber,name,diploma,cGPA,image}=(cov_1r9u4b0v5t().s[2]++,req.body);// Read the student data from the JSON file
const studentsData=(cov_1r9u4b0v5t().s[3]++,await fs.readFile('studentdata.json','utf-8'));const students=(cov_1r9u4b0v5t().s[4]++,JSON.parse(studentsData));// Find the student to update
const studentIndex=(cov_1r9u4b0v5t().s[5]++,students.findIndex(student=>{cov_1r9u4b0v5t().f[1]++;cov_1r9u4b0v5t().s[6]++;return student.adminNumber===adminNumber;}));cov_1r9u4b0v5t().s[7]++;if(studentIndex===-1){cov_1r9u4b0v5t().b[0][0]++;cov_1r9u4b0v5t().s[8]++;return res.status(404).json({message:'Student not found'});}else{cov_1r9u4b0v5t().b[0][1]++;}// Update the student data
cov_1r9u4b0v5t().s[9]++;students[studentIndex]={...students[studentIndex],name,diploma,cGPA:parseFloat(cGPA),image};// Save the updated students list back to the JSON file
cov_1r9u4b0v5t().s[10]++;await fs.writeFile('studentdata.json',JSON.stringify(students,null,2));// Return the updated student
cov_1r9u4b0v5t().s[11]++;res.json({message:'Student updated successfully',student:students[studentIndex]});}catch(error){cov_1r9u4b0v5t().s[12]++;console.error("Error updating student:",error);cov_1r9u4b0v5t().s[13]++;res.status(500).json({message:'Server error: '+error.message});}}cov_1r9u4b0v5t().s[14]++;module.exports=updateStudent;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMXI5dTRiMHY1dCIsImFjdHVhbENvdmVyYWdlIiwiZnMiLCJzIiwicmVxdWlyZSIsInByb21pc2VzIiwidXBkYXRlU3R1ZGVudCIsInJlcSIsInJlcyIsImYiLCJhZG1pbk51bWJlciIsIm5hbWUiLCJkaXBsb21hIiwiY0dQQSIsImltYWdlIiwiYm9keSIsInN0dWRlbnRzRGF0YSIsInJlYWRGaWxlIiwic3R1ZGVudHMiLCJKU09OIiwicGFyc2UiLCJzdHVkZW50SW5kZXgiLCJmaW5kSW5kZXgiLCJzdHVkZW50IiwiYiIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwicGFyc2VGbG9hdCIsIndyaXRlRmlsZSIsInN0cmluZ2lmeSIsImVycm9yIiwiY29uc29sZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJ1cGRhdGUtc3R1ZGVudC11dGlsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGZzID0gcmVxdWlyZSgnZnMnKS5wcm9taXNlcztcclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVN0dWRlbnQocmVxLCByZXMpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgeyBhZG1pbk51bWJlciwgbmFtZSwgZGlwbG9tYSwgY0dQQSwgaW1hZ2UgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgICAgICAvLyBSZWFkIHRoZSBzdHVkZW50IGRhdGEgZnJvbSB0aGUgSlNPTiBmaWxlXHJcbiAgICAgICAgY29uc3Qgc3R1ZGVudHNEYXRhID0gYXdhaXQgZnMucmVhZEZpbGUoJ3N0dWRlbnRkYXRhLmpzb24nLCAndXRmLTgnKTtcclxuICAgICAgICBjb25zdCBzdHVkZW50cyA9IEpTT04ucGFyc2Uoc3R1ZGVudHNEYXRhKTtcclxuXHJcbiAgICAgICAgLy8gRmluZCB0aGUgc3R1ZGVudCB0byB1cGRhdGVcclxuICAgICAgICBjb25zdCBzdHVkZW50SW5kZXggPSBzdHVkZW50cy5maW5kSW5kZXgoc3R1ZGVudCA9PiBzdHVkZW50LmFkbWluTnVtYmVyID09PSBhZG1pbk51bWJlcik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHN0dWRlbnRJbmRleCA9PT0gLTEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1N0dWRlbnQgbm90IGZvdW5kJyB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgc3R1ZGVudCBkYXRhXHJcbiAgICAgICAgc3R1ZGVudHNbc3R1ZGVudEluZGV4XSA9IHtcclxuICAgICAgICAgICAgLi4uc3R1ZGVudHNbc3R1ZGVudEluZGV4XSxcclxuICAgICAgICAgICAgbmFtZSxcclxuICAgICAgICAgICAgZGlwbG9tYSxcclxuICAgICAgICAgICAgY0dQQTogcGFyc2VGbG9hdChjR1BBKSxcclxuICAgICAgICAgICAgaW1hZ2VcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBTYXZlIHRoZSB1cGRhdGVkIHN0dWRlbnRzIGxpc3QgYmFjayB0byB0aGUgSlNPTiBmaWxlXHJcbiAgICAgICAgYXdhaXQgZnMud3JpdGVGaWxlKCdzdHVkZW50ZGF0YS5qc29uJywgSlNPTi5zdHJpbmdpZnkoc3R1ZGVudHMsIG51bGwsIDIpKTtcclxuXHJcbiAgICAgICAgLy8gUmV0dXJuIHRoZSB1cGRhdGVkIHN0dWRlbnRcclxuICAgICAgICByZXMuanNvbih7IG1lc3NhZ2U6ICdTdHVkZW50IHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5Jywgc3R1ZGVudDogc3R1ZGVudHNbc3R1ZGVudEluZGV4XSB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHVwZGF0aW5nIHN0dWRlbnQ6XCIsIGVycm9yKTtcclxuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdTZXJ2ZXIgZXJyb3I6ICcgKyBlcnJvci5tZXNzYWdlIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5t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
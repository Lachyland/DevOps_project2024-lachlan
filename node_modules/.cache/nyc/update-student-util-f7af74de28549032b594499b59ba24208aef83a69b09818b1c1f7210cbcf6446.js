function cov_souflxx7b(){var path="C:\\Users\\GIGABYTE G5\\Desktop\\Devops\\Individual-project\\DevOps_project2024-lachlan\\utils\\update-student-util.js";var hash="a00742cfb58b3d949e25072e9d0f32ddf10e2964";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\GIGABYTE G5\\Desktop\\Devops\\Individual-project\\DevOps_project2024-lachlan\\utils\\update-student-util.js",statementMap:{"0":{start:{line:1,column:16},end:{line:1,column:44}},"1":{start:{line:4,column:43},end:{line:4,column:54}},"2":{start:{line:6,column:4},end:{line:40,column:5}},"3":{start:{line:8,column:29},end:{line:12,column:9}},"4":{start:{line:15,column:8},end:{line:17,column:9}},"5":{start:{line:16,column:12},end:{line:16,column:39}},"6":{start:{line:20,column:24},end:{line:24,column:9}},"7":{start:{line:26,column:8},end:{line:28,column:9}},"8":{start:{line:27,column:12},end:{line:27,column:50}},"9":{start:{line:31,column:8},end:{line:37,column:10}},"10":{start:{line:39,column:8},end:{line:39,column:69}},"11":{start:{line:45,column:0},end:{line:45,column:31}}},fnMap:{"0":{name:"updateStudent",decl:{start:{line:3,column:15},end:{line:3,column:28}},loc:{start:{line:3,column:55},end:{line:41,column:1}},line:3}},branchMap:{"0":{loc:{start:{line:15,column:8},end:{line:17,column:9}},type:"if",locations:[{start:{line:15,column:8},end:{line:17,column:9}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:15},"1":{loc:{start:{line:26,column:8},end:{line:28,column:9}},type:"if",locations:[{start:{line:26,column:8},end:{line:28,column:9}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:26},"2":{loc:{start:{line:35,column:18},end:{line:35,column:63}},type:"cond-expr",locations:[{start:{line:35,column:33},end:{line:35,column:56}},{start:{line:35,column:59},end:{line:35,column:63}}],line:35}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0},f:{"0":0},b:{"0":[0,0],"1":[0,0],"2":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a00742cfb58b3d949e25072e9d0f32ddf10e2964"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_souflxx7b=function(){return actualCoverage;};}return actualCoverage;}cov_souflxx7b();const Student=(cov_souflxx7b().s[0]++,require('../models/Student'));// Adjust the path if necessary
async function updateStudent(adminNumber,studentData){cov_souflxx7b().f[0]++;const{name,diploma,cGPA,image}=(cov_souflxx7b().s[1]++,studentData);cov_souflxx7b().s[2]++;try{// Prepare update object
const updateFields=(cov_souflxx7b().s[3]++,{name,diploma,cGPA});// If image exists, include it in the update
cov_souflxx7b().s[4]++;if(image!==undefined){cov_souflxx7b().b[0][0]++;cov_souflxx7b().s[5]++;updateFields.image=image;// Only update the image if it's provided
}else{cov_souflxx7b().b[0][1]++;}// Perform the update operation
const student=(cov_souflxx7b().s[6]++,await Student.findOneAndUpdate({adminNumber},// Find by adminNumber
updateFields,// Update fields, including image if present
{new:true}// Return the updated document
));cov_souflxx7b().s[7]++;if(!student){cov_souflxx7b().b[1][0]++;cov_souflxx7b().s[8]++;throw new Error('Resource not found');}else{cov_souflxx7b().b[1][1]++;}// Convert Decimal128 fields to strings if necessary
cov_souflxx7b().s[9]++;return{adminNumber:student.adminNumber,name:student.name,diploma:student.diploma,cGPA:student.cGPA?(cov_souflxx7b().b[2][0]++,student.cGPA.toString()):(cov_souflxx7b().b[2][1]++,null),image:student.image};}catch(error){cov_souflxx7b().s[10]++;throw new Error(`Error updating resource: ${error.message}`);}}cov_souflxx7b().s[11]++;module.exports=updateStudent;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3Zfc291Zmx4eDdiIiwiYWN0dWFsQ292ZXJhZ2UiLCJTdHVkZW50IiwicyIsInJlcXVpcmUiLCJ1cGRhdGVTdHVkZW50IiwiYWRtaW5OdW1iZXIiLCJzdHVkZW50RGF0YSIsImYiLCJuYW1lIiwiZGlwbG9tYSIsImNHUEEiLCJpbWFnZSIsInVwZGF0ZUZpZWxkcyIsInVuZGVmaW5lZCIsImIiLCJzdHVkZW50IiwiZmluZE9uZUFuZFVwZGF0ZSIsIm5ldyIsIkVycm9yIiwidG9TdHJpbmciLCJlcnJvciIsIm1lc3NhZ2UiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsidXBkYXRlLXN0dWRlbnQtdXRpbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBTdHVkZW50ID0gcmVxdWlyZSgnLi4vbW9kZWxzL1N0dWRlbnQnKTsgLy8gQWRqdXN0IHRoZSBwYXRoIGlmIG5lY2Vzc2FyeVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gdXBkYXRlU3R1ZGVudChhZG1pbk51bWJlciwgc3R1ZGVudERhdGEpIHtcclxuICAgIGNvbnN0IHsgbmFtZSwgZGlwbG9tYSwgY0dQQSwgaW1hZ2UgfSA9IHN0dWRlbnREYXRhO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgLy8gUHJlcGFyZSB1cGRhdGUgb2JqZWN0XHJcbiAgICAgICAgY29uc3QgdXBkYXRlRmllbGRzID0ge1xyXG4gICAgICAgICAgICBuYW1lLFxyXG4gICAgICAgICAgICBkaXBsb21hLFxyXG4gICAgICAgICAgICBjR1BBXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gSWYgaW1hZ2UgZXhpc3RzLCBpbmNsdWRlIGl0IGluIHRoZSB1cGRhdGVcclxuICAgICAgICBpZiAoaW1hZ2UgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB1cGRhdGVGaWVsZHMuaW1hZ2UgPSBpbWFnZTsgIC8vIE9ubHkgdXBkYXRlIHRoZSBpbWFnZSBpZiBpdCdzIHByb3ZpZGVkXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBQZXJmb3JtIHRoZSB1cGRhdGUgb3BlcmF0aW9uXHJcbiAgICAgICAgY29uc3Qgc3R1ZGVudCA9IGF3YWl0IFN0dWRlbnQuZmluZE9uZUFuZFVwZGF0ZShcclxuICAgICAgICAgICAgeyBhZG1pbk51bWJlciB9LCAgLy8gRmluZCBieSBhZG1pbk51bWJlclxyXG4gICAgICAgICAgICB1cGRhdGVGaWVsZHMsICAvLyBVcGRhdGUgZmllbGRzLCBpbmNsdWRpbmcgaW1hZ2UgaWYgcHJlc2VudFxyXG4gICAgICAgICAgICB7IG5ldzogdHJ1ZSB9ICAvLyBSZXR1cm4gdGhlIHVwZGF0ZWQgZG9jdW1lbnRcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBpZiAoIXN0dWRlbnQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXNvdXJjZSBub3QgZm91bmQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENvbnZlcnQgRGVjaW1hbDEyOCBmaWVsZHMgdG8gc3RyaW5ncyBpZiBuZWNlc3NhcnlcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBhZG1pbk51bWJlcjogc3R1ZGVudC5hZG1pbk51bWJlcixcclxuICAgICAgICAgICAgbmFtZTogc3R1ZGVudC5uYW1lLFxyXG4gICAgICAgICAgICBkaXBsb21hOiBzdHVkZW50LmRpcGxvbWEsXHJcbiAgICAgICAgICAgIGNHUEE6IHN0dWRlbnQuY0dQQSA/IHN0dWRlbnQuY0dQQS50b1N0cmluZygpIDogbnVsbCxcclxuICAgICAgICAgICAgaW1hZ2U6IHN0dWRlbnQuaW1hZ2UsXHJcbiAgICAgICAgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFcnJvciB1cGRhdGluZyByZXNvdXJjZTogJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gdXBkYXRlU3R1ZGVudDtcclxuIl0sIm1hcHBpbmdzIjoic3VFQWVZO0FBQUFBLGFBQUEsU0FBQUEsQ0FBQSxTQUFBQyxjQUFBLFdBQUFBLGNBQUEsRUFBQUQsYUFBQSxHQWZaLEtBQU0sQ0FBQUUsT0FBTyxFQUFBRixhQUFBLEdBQUFHLENBQUEsTUFBR0MsT0FBTyxDQUFDLG1CQUFtQixDQUFDLEVBQUU7QUFFOUMsY0FBZSxDQUFBQyxhQUFhQSxDQUFDQyxXQUFXLENBQUVDLFdBQVcsQ0FBRSxDQUFBUCxhQUFBLEdBQUFRLENBQUEsTUFDbkQsS0FBTSxDQUFFQyxJQUFJLENBQUVDLE9BQU8sQ0FBRUMsSUFBSSxDQUFFQyxLQUFNLENBQUMsRUFBQVosYUFBQSxHQUFBRyxDQUFBLE1BQUdJLFdBQVcsRUFBQ1AsYUFBQSxHQUFBRyxDQUFBLE1BRW5ELEdBQUksQ0FDQTtBQUNBLEtBQU0sQ0FBQVUsWUFBWSxFQUFBYixhQUFBLEdBQUFHLENBQUEsTUFBRyxDQUNqQk0sSUFBSSxDQUNKQyxPQUFPLENBQ1BDLElBQ0osQ0FBQyxFQUVEO0FBQUFYLGFBQUEsR0FBQUcsQ0FBQSxNQUNBLEdBQUlTLEtBQUssR0FBS0UsU0FBUyxDQUFFLENBQUFkLGFBQUEsR0FBQWUsQ0FBQSxTQUFBZixhQUFBLEdBQUFHLENBQUEsTUFDckJVLFlBQVksQ0FBQ0QsS0FBSyxDQUFHQSxLQUFLLENBQUc7QUFDakMsQ0FBQyxLQUFBWixhQUFBLEdBQUFlLENBQUEsVUFFRDtBQUNBLEtBQU0sQ0FBQUMsT0FBTyxFQUFBaEIsYUFBQSxHQUFBRyxDQUFBLE1BQUcsS0FBTSxDQUFBRCxPQUFPLENBQUNlLGdCQUFnQixDQUMxQyxDQUFFWCxXQUFZLENBQUMsQ0FBRztBQUNsQk8sWUFBWSxDQUFHO0FBQ2YsQ0FBRUssR0FBRyxDQUFFLElBQUssQ0FBRztBQUNuQixDQUFDLEVBQUNsQixhQUFBLEdBQUFHLENBQUEsTUFFRixHQUFJLENBQUNhLE9BQU8sQ0FBRSxDQUFBaEIsYUFBQSxHQUFBZSxDQUFBLFNBQUFmLGFBQUEsR0FBQUcsQ0FBQSxNQUNWLEtBQU0sSUFBSSxDQUFBZ0IsS0FBSyxDQUFDLG9CQUFvQixDQUFDLENBQ3pDLENBQUMsS0FBQW5CLGFBQUEsR0FBQWUsQ0FBQSxVQUVEO0FBQUFmLGFBQUEsR0FBQUcsQ0FBQSxNQUNBLE1BQU8sQ0FDSEcsV0FBVyxDQUFFVSxPQUFPLENBQUNWLFdBQVcsQ0FDaENHLElBQUksQ0FBRU8sT0FBTyxDQUFDUCxJQUFJLENBQ2xCQyxPQUFPLENBQUVNLE9BQU8sQ0FBQ04sT0FBTyxDQUN4QkMsSUFBSSxDQUFFSyxPQUFPLENBQUNMLElBQUksRUFBQVgsYUFBQSxHQUFBZSxDQUFBLFNBQUdDLE9BQU8sQ0FBQ0wsSUFBSSxDQUFDUyxRQUFRLENBQUMsQ0FBQyxHQUFBcEIsYUFBQSxHQUFBZSxDQUFBLFNBQUcsSUFBSSxFQUNuREgsS0FBSyxDQUFFSSxPQUFPLENBQUNKLEtBQ25CLENBQUMsQ0FDTCxDQUFFLE1BQU9TLEtBQUssQ0FBRSxDQUFBckIsYUFBQSxHQUFBRyxDQUFBLE9BQ1osS0FBTSxJQUFJLENBQUFnQixLQUFLLENBQUMsNEJBQTRCRSxLQUFLLENBQUNDLE9BQU8sRUFBRSxDQUFDLENBQ2hFLENBQ0osQ0FBQ3RCLGFBQUEsR0FBQUcsQ0FBQSxPQUlEb0IsTUFBTSxDQUFDQyxPQUFPLENBQUduQixhQUFhIiwiaWdub3JlTGlzdCI6W119